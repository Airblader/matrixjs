var COMPILED=!0,goog=goog||{};goog.global=this;goog.define=function(a,c){var e=c;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(e=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,e)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.exportPath_=function(a,c,e){a=a.split(".");e=e||goog.global;!(a[0]in e)&&e.execScript&&e.execScript("var "+a[0]);for(var l;a.length&&(l=a.shift());)!a.length&&goog.isDef(c)?e[l]=c:e=e[l]?e[l]:e[l]={}};goog.getObjectByName=function(a,c){for(var e=a.split("."),l=c||goog.global,h;h=e.shift();)if(goog.isDefAndNotNull(l[h]))l=l[h];else return null;return l};
goog.globalize=function(a,c){var e=c||goog.global,l;for(l in a)e[l]=a[l]};goog.addDependency=function(a,c,e){if(!COMPILED){var l;a=a.replace(/\\/g,"/");for(var h=goog.dependencies_,k=0;l=c[k];k++)h.nameToPath[l]=a,a in h.pathToNames||(h.pathToNames[a]={}),h.pathToNames[a][l]=!0;for(l=0;c=e[l];l++)a in h.requires||(h.requires[a]={}),h.requires[a][c]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var c=goog.getPathFromDeps_(a);if(c){goog.included_[c]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,c){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];
!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),c=a.length-1;0<=c;--c){var e=a[c].src,l=e.lastIndexOf("?"),l=
-1==l?e.length:l;if("base.js"==e.substr(l-7,7)){goog.basePath=e.substr(0,l-7);break}}},goog.importScript_=function(a){var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&c(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var c=goog.global.document;if("complete"==c.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}c.write('<script type="text/javascript" src="'+
a+'">\x3c/script>');return!0}return!1},goog.writeScripts_=function(){function a(k){if(!(k in l.written)){if(!(k in l.visited)&&(l.visited[k]=!0,k in l.requires))for(var d in l.requires[k])if(!goog.isProvided_(d))if(d in l.nameToPath)a(l.nameToPath[d]);else throw Error("Undefined nameToPath for "+d);k in e||(e[k]=!0,c.push(k))}}var c=[],e={},l=goog.dependencies_,h;for(h in goog.included_)l.written[h]||a(h);for(h=0;h<c.length;h++)if(c[h])goog.importScript_(goog.basePath+c[h]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var e=Object.prototype.toString.call(a);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var c=goog.typeOf(a);return"array"==c||"object"==c&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var c=typeof a;return"object"==c&&null!=a||"function"==c};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(c){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var c=goog.typeOf(a);if("object"==c||"array"==c){if(a.clone)return a.clone();var c="array"==c?[]:{},e;for(e in a)c[e]=goog.cloneObject(a[e]);return c}return a};goog.bindNative_=function(a,c,e){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,c,e){if(!a)throw Error();if(2<arguments.length){var l=Array.prototype.slice.call(arguments,2);return function(){var h=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(h,l);return a.apply(c,h)}}return function(){return a.apply(c,arguments)}};goog.bind=function(a,c,e){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,c){var e=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);c.unshift.apply(c,e);return a.apply(this,c)}};goog.mixin=function(a,c){for(var e in c)a[e]=c[e]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var c=goog.global.document,e=c.createElement("script");e.type="text/javascript";e.defer=!1;e.appendChild(c.createTextNode(a));c.body.appendChild(e);
c.body.removeChild(e)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,c){var e=function(a){return goog.cssNameMapping_[a]||a},l=function(a){a=a.split("-");for(var c=[],d=0;d<a.length;d++)c.push(e(a[d]));return c.join("-")},l=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?e:l:function(a){return a};return c?a+"-"+l(c):l(a)};goog.setCssNameMapping=function(a,c){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=c};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,c){var e=c||{},l;for(l in e){var h=(""+e[l]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+l+"\\}","gi"),h)}return a};goog.getMsgWithFallback=function(a,c){return a};goog.exportSymbol=function(a,c,e){goog.exportPath_(a,c,e)};goog.exportProperty=function(a,c,e){a[c]=e};
goog.inherits=function(a,c){function e(){}e.prototype=c.prototype;a.superClass_=c.prototype;a.prototype=new e;a.prototype.constructor=a};
goog.base=function(a,c,e){var l=arguments.callee.caller;if(goog.DEBUG&&!l)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(l.superClass_)return l.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var h=Array.prototype.slice.call(arguments,2),k=!1,d=a.constructor;d;d=d.superClass_&&d.superClass_.constructor)if(d.prototype[c]===l)k=!0;else if(k)return d.prototype[c].apply(a,
h);if(a[c]===l)return a.constructor.prototype[c].apply(a,h);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};(function(a){function c(g){return"number"===typeof g}function e(g){return c(g)&&(g|0)===g}function l(g){for(var b=0;b<g.length;b++)if(!c(g[b]))return!1;return!0}function h(){throw Error("This cannot be instantiated");}function k(g,b){this.name="MatrixError";this.code=g;this.message=b;this.toString=function(){return this.name+" ["+this.code+"]: "+(this.message||"No message")}}function d(g){var b=[].slice.call(arguments),a,m,f=[];this.___get=function(g,b){return f[m*(g-1)+b-1]};this.___set=function(g,
b,a){f[m*(g-1)+b-1]=a;return this};this.rows=function(){return a};this.columns=function(){return m};this.___getElements=function(){return f};(function(){if(1===b.length&&b[0]instanceof Array&&0!==b[0].length&&b[0][0]instanceof Array){a=b[0].length;m=-1;for(var g=0;g<b[0].length;g++){if(b[0][g].length!==m&&-1!==m)throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Number of columns must be the same for all rows");if(!l(b[0][g]))throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Elements must be numbers");m=Math.max(m,
b[0][g].length);f=f.concat(b[0][g])}}else if(1<=b.length&&3>=b.length&&b[0]instanceof Array&&(0===b[0].length||c(b[0][0]))){if(!l(b[0]))throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Elements must be numbers");f=b[0];var g=b[1],d=b[2];!c(g)&&!c(d)?g=d=Math.sqrt(f.length):!c(g)&&e(d)?g=f.length/d:e(g)&&!c(d)&&(d=f.length/g);if(!e(g)||!e(d))throw new k(k.ErrorCodes.OUT_OF_BOUNDS,"Array must represent square matrix if no size is given");a=g;m=d}else if(1===b.length&&e(b[0]))a=b[0],m=b[0],f=h.repeat(a*
m,0);else if(2===b.length&&e(b[0])&&e(b[1]))a=b[0],m=b[1],f=h.repeat(a*m,0);else throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Parameters must match a supported signature");})();return this}function t(g){[].slice.call(arguments);var b,a=[],m=[],f=[];this.___get=function(g,b){for(var d=f[g-1];d<f[g];d++)if(m[d]===b)return a[d];return 0};this.___set=function(g,b,d){var c=f[g];a.splice(c,0,d);for(m.splice(c,0,b);g<f.length;g++)f[g]+=1;return this};this.rows=function(){return f.length-1};this.columns=
function(){return b};a=[1,2,3];m=[1,2,3];f=[0,1,2,3];b=3;return this}k.ErrorCodes={INVALID_PARAMETERS:"Invalid parameters",OUT_OF_BOUNDS:"Out of bounds",DIMENSION_MISMATCH:"Dimension mismatch",MATRIX_IS_SINGULAR:"Matrix is singular",UNKNOWN_TYPE:"Unknown type"};d.options={stringify:{rowSeparator:"\r\n",columnSeparator:"\t"},isTriangular:{mode:"both"},roundTo:{digits:0},norm:{which:"max"},random:{minVal:0,maxVal:1,onlyInteger:!0}};d.prototype.get=function(g,b){if(!this.isInRange(g,b))throw new k(k.ErrorCodes.OUT_OF_BOUNDS);
return this.___get(g,b)};d.prototype.set=function(g,b,a){if(!this.isInRange(g,b))throw new k(k.ErrorCodes.OUT_OF_BOUNDS);if(!c(a))throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Value has to be a number");return this.___set(g,b,a)};d.prototype.getRow=function(g,b){b=h.getBooleanWithDefault(b,!1);if(!this.isInRange(g,null))throw new k(k.ErrorCodes.OUT_OF_BOUNDS);return this.__getRow(g,b)};d.prototype.__getRow=function(g,b){for(var a=[],m=this.columns(),f=1;f<=m;f++)a.push(this.___get(g,f));return b?new d(a,
1):a};d.prototype.setRow=function(g,b){b=h.toArray(b);if(!this.isInRange(g,null))throw new k(k.ErrorCodes.OUT_OF_BOUNDS);if(b.length!==this.columns())throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Wrong number of columns in row.");return this.__setRow(g,b)};d.prototype.__setRow=function(g,b){for(var a=this.columns(),m=1;m<=a;m++)this.___set(g,m,b[m-1]);return this};d.prototype.getColumn=function(g,b){b=h.getBooleanWithDefault(b,!1);if(!this.isInRange(null,g))throw new k(k.ErrorCodes.OUT_OF_BOUNDS);
return this.__getColumn(g,b)};d.prototype.__getColumn=function(g,b){for(var a=[],m=this.rows(),f=1;f<=m;f++)a.push(this.___get(f,g));return b?new d(a,null,1):a};d.prototype.setColumn=function(g,b){b=h.toArray(b);if(!this.isInRange(null,g))throw new k(k.ErrorCodes.OUT_OF_BOUNDS);if(b.length!==this.rows())throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Wrong number of rows in column");return this.__setColumn(g,b)};d.prototype.__setColumn=function(g,b){for(var a=this.rows(),m=1;m<=a;m++)this.___set(m,g,
b[m-1]);return this};d.prototype.isSameSizeAs=function(g){return this.rows()===g.rows()&&this.columns()===g.columns()};d.prototype.isSparse=function(){return this instanceof t};d.prototype.isVector=function(){return 1===this.dim("min")};d.prototype.isSquare=function(){return this.rows()===this.columns()};d.prototype.isSymmetric=function(){if(!this.isSquare())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");for(var g=this.rows(),b=2;b<=g;b++)for(var a=1;a<b;a++)if(this.___get(b,
a)!==this.___get(a,b))return!1;return!0};d.prototype.isTriangular=function(g){g=h.getStringWithDefault(g,d.options.isTriangular.mode);if(!this.isSquare())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");switch(g.toLowerCase()){case "lower":return this.__isTriangular(!1);case "upper":return this.__isTriangular(!0);case "both":return this.__isTriangular(!0)||this.__isTriangular(!1);default:throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Mode not supported");}};d.prototype.__isTriangular=
function(g){g=g?1:-1;for(var b,a,m=this.rows(),f=1;f<m;f++){b=this.diag(g*f);a=b.length;for(var d=0;d<a;d++)if(0!==b[d])return!1}return!0};d.prototype.copy=function(){return new d(this.toArray(),this.rows(),this.columns())};d.prototype.size=function(){return this.rows()*this.columns()};d.prototype.dim=function(g){switch(g){case 1:case "rows":return this.rows();case 2:case "columns":return this.columns();case "max":return Math.max(this.rows(),this.columns());case "min":return Math.min(this.rows(),
this.columns());default:throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Parameter must match a known value");}};d.prototype.add=function(g){var b=this.rows(),a=this.columns();if(1<arguments.length)return b=[].slice.call(arguments),this.add.apply(this.add(b.shift()),b);if(!this.isSameSizeAs(g))throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrices must be of the same size");for(var m=new d(b,a),f,c,q=1;q<=b;q++){f=this.__getRow(q,!1);c=g.__getRow(q,!1);for(var e=0;e<a;e++)f[e]+=c[e];m.__setRow(q,f)}return m};
d.prototype.subtract=function(g){var b=this.rows(),a=this.columns();if(1<arguments.length)return b=[].slice.call(arguments),this.subtract.apply(this.subtract(b.shift()),b);if(!this.isSameSizeAs(g))throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrices must be of the same size");for(var m=new d(b,a),f,c,e=1;e<=b;e++){f=this.__getRow(e,!1);c=g.__getRow(e,!1);for(var h=0;h<a;h++)f[h]-=c[h];m.__setRow(e,f)}return m};d.prototype.scale=function(g){if(!c(g))throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Parameter must be a number");
for(var b=this.rows(),a=this.columns(),m=new d(b,a),f,e=1;e<=b;e++){f=this.__getRow(e,!1);for(var h=0;h<a;h++)f[h]*=g;m.__setRow(e,f)}return m};d.prototype.multiply=function(g){var b=this.rows(),a=this.columns(),m=g.columns();if(a!==g.rows())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Inner dimensions must match");for(var f=new d(b,m),c=1;c<=b;c++)for(var e=1;e<=m;e++){for(var h=0,l=this.__getRow(c,!1),r=g.__getColumn(e,!1),s=0;s<a;s++)h+=l[s]*r[s];f.___set(c,e,h)}return f};d.prototype.transpose=
function(){for(var g=this.rows(),b=new d(this.columns(),g),a=1;a<=g;a++)b.__setColumn(a,this.__getRow(a,!1));return b};d.prototype.trace=function(){if(!this.isSquare())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");for(var g=this.rows(),b=0,a=1;a<=g;a++)b+=this.___get(a,a);return b};d.prototype.decomposeLU=function(){var g=0,b=this.copy(),a,m,f,d,c,e=this.rows(),h=this.columns(),l;for(f=1;f<=e;f++){m=0;c=-1;d=b.__getColumn(f,!1);for(a=f;a<=e;a++)l=Math.abs(d[a-1]),l>=c&&(m=a,
c=l);if(0===d[m-1])throw new k(k.ErrorCodes.MATRIX_IS_SINGULAR);m!==f&&(a=b.__getRow(m,!1),b.__setRow(m,b.__getRow(f,!1)),b.__setRow(f,a),g++);d=b.__getRow(f,!1);for(a=f+1;a<=e;a++){c=b.__getRow(a,!1);for(m=f;m<h;m++)c[m]-=d[m]*c[f-1]/d[f-1];c[f-1]=0;b.__setRow(a,c)}}b.swappedRows=g;return b};d.prototype.det=function(){var g,a,c,m=this.rows();if(!this.isSquare())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");if(this.isTriangular())a=1,c=this.diag();else{try{g=this.decomposeLU()}catch(d){if(d.code&&
d.code===k.ErrorCodes.MATRIX_IS_SINGULAR)return 0;throw d;}a=Math.pow(-1,g.swappedRows);c=g.diag()}for(g=0;g<m;g++)a*=c[g];return a};d.prototype.inverse=function(){if(!this.isSquare())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");var g=this.augment(d.eye(this.rows())),a,c,m,f,e,h,l,p,r;try{g=g.decomposeLU();p=g.rows();r=g.columns();for(f=p;1<f;f--){c=g.__getRow(f-1,!1);a=g.__getRow(f,!1);l=c[f-1]/a[f-1];m=[];for(h=0;h<r;h++)m[h]=c[h]-a[h]*l;g.__setRow(f-1,m)}for(e=1;e<=p;e++){a=
g.__getRow(e,!1);m=[];for(h=0;h<r;h++)m[h]=a[h]/a[e-1];g.__setRow(e,m)}}catch(s){throw new k(k.ErrorCodes.MATRIX_IS_SINGULAR);}return g.submatrix(1,p,this.columns()+1,r)};d.prototype.submatrix=function(a,b,c,m){if(!this.isInRange(a,c)||!this.isInRange(b,m)||a>b||c>m)throw new k(k.ErrorCodes.OUT_OF_BOUNDS);for(var f=new d(b-a+1,m-c+1),e=a;e<=b;e++)f.__setRow(e-a+1,this.__getRow(e,!1).slice(c-1,m));return f};d.prototype.augment=function(a){var b=this.rows(),c=this.columns(),m=a.columns();if(b!==a.rows())throw new k(k.ErrorCodes.INVALID_PARAMETERS,
"Number of rows must match");for(var b=new d(b,c+m),f=1;f<=c;f++)b.__setColumn(f,this.__getColumn(f,!1));for(f=1;f<=m;f++)b.__setColumn(f+c,a.__getColumn(f,!1));return b};d.prototype.dot=function(a){var b=this.rows();if(!this.isVector()||!a.isVector()||1!==this.columns()||1!==a.columns())throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Parameter must be a column vector");if(b!==a.rows())throw new k(k.ErrorCodes.DIMENSION_MISMATCH);for(var c=0,d=1;d<=b;d++)c+=this.___get(d,1)*a.___get(d,1);return c};d.prototype.round=
function(){return this.roundTo(0)};d.prototype.roundTo=function(a){a=h.getNumberWithDefault(a,d.options.roundTo.digits);var b=Math.pow(10,a);return this.fun(function(a){return Math.round(a*b)/b})};d.prototype.abs=function(){return this.fun(function(a){return Math.abs(a)})};d.prototype.cross=function(a){if(!this.isVector()||!a.isVector()||3!==this.rows()||3!==a.rows())throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Parameters must be three-dimensional column vectors");return new d([[this.___get(2,1)*
a.___get(3,1)-this.___get(3,1)*a.___get(2,1)],[this.___get(3,1)*a.___get(1,1)-this.___get(1,1)*a.___get(3,1)],[this.___get(1,1)*a.___get(2,1)-this.___get(2,1)*a.___get(1,1)]])};d.prototype.addRow=function(a){a=h.toArray(a);for(var b=this.rows(),c=new d(b+1,this.columns()),m=1;m<=b;m++)c.__setRow(m,this.__getRow(m,!1));c.__setRow(b+1,a);return c};d.prototype.addColumn=function(a){return this.copy().augment(new d(h.toArray(a),null,1))};d.prototype.contains=function(a,b){b=h.getNumberWithDefault(b,0);
var d=this.rows(),m=this.columns(),f;if(!c(a)||!c(b))throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Parameter must be a number");for(var e=1;e<=d;e++){f=this.__getRow(e,!1);for(var l=0;l<m;l++)if(0===b){if(f[l]===a)return!0}else if(Math.abs(f[l]-a)<=b)return!0}return!1};d.prototype.stringify=function(a,b){a=h.getStringWithDefault(a,d.options.stringify.rowSeparator);b=h.getStringWithDefault(b,d.options.stringify.columnSeparator);for(var c=[],m,f=this.rows(),e=1;e<=f;e++)m=this.__getRow(e,!1),c.push(m.join(b));
return c.join(a)};d.prototype.equals=function(a){var b=this.rows(),c=this.columns(),d,f;if(!this.isSameSizeAs(a))return!1;for(var e=1;e<=b;e++){d=this.__getRow(e,!1);f=a.__getRow(e,!1);for(var h=0;h<c;h++)if(d[h]!==f[h])return!1}return!0};d.prototype.fun=function(a,b){b=b||h.filters.all;if("function"!==typeof a)throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Applicator must be a function");if("function"!==typeof b)throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Filter must be a function");for(var c,m,f=
this.rows(),e=this.columns(),l=new d(f,e),n=1;n<=f;n++){m=this.__getRow(n,!1);for(var p=1;p<=e;p++)c=m[p-1],b(c,n,p)&&(m[p-1]=a(c,n,p));l.__setRow(n,m)}return l};d.prototype.spfun=function(a){return this.fun(a,h.filters.nonZero)};d.prototype.pw_exp=function(){return this.fun(h.applicators.exp,null)};d.prototype.pw_pow=function(a){return this.fun(function(b){return Math.pow(b,a)},null)};d.prototype.norm=function(a,b){a=h.getStringWithDefault(a,d.options.norm.which);b=b||{};switch(a.toLowerCase()){case "p":case "pnorm":return this.pnorm(Number(b));
case "frobenius":return this.pnorm(2);case "rows":case "rowsum":return this.rownorm();case "columns":case "columnsum":return this.columnnorm();case "max":return this.maxnorm();default:throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Norm not supported");}};d.prototype.pnorm=function(a){if(!e(a))throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Parameter must be an integer");for(var b=0,c=this.rows(),d=this.columns(),f,h=1;h<=c;h++){f=this.__getRow(h,!1);for(var l=0;l<d;l++)b+=Math.pow(Math.abs(f[l]),a)}return Math.pow(b,
1/a)};d.prototype.maxnorm=function(){for(var a=0,b=this.rows(),c=this.columns(),d,f=1;f<=b;f++){d=this.__getRow(f,!1);for(var e=0;e<c;e++)a=Math.max(a,Math.abs(d[e]))}return a};d.prototype.rownorm=function(){for(var a=0,b=this.rows(),c=1;c<=b;c++)a=Math.max(a,this.__getRow(c,!0).pnorm(1));return a};d.prototype.columnnorm=function(){for(var a=0,b=this.columns(),c=1;c<=b;c++)a=Math.max(a,this.__getColumn(c,!0).pnorm(1));return a};d.prototype.diag=function(a){a=h.getNumberWithDefault(a,0);var b=[],c=
-Math.min(a,0);a=Math.max(a,0);var d=0===c?this.columns()-a:this.rows()-c;if(0>=d)throw new k(k.ErrorCodes.OUT_OF_BOUNDS);for(var e=1;e<=d;e++)b.push(this.___get(e+c,e+a));return b};d.prototype.isInRange=function(a,b){return(!c(a)||1<=a&&a<=this.rows())&&(!c(b)||1<=b&&b<=this.columns())};d.prototype.toArray=function(){return[].slice.call(this.___getElements())};d.zeros=function(a,b){b=h.getNumberWithDefault(b,a);return new d(a,b)};d.ones=function(a,b){b=h.getNumberWithDefault(b,a);for(var c=new d(a,
b),e=1;e<=a;e++)for(var f=1;f<=b;f++)c.___set(e,f,1);return c};d.eye=function(a){for(var b=new d(a,a),c=1;c<=a;c++)b.___set(c,c,1);return b};d.diag=function(a,b){a=h.toArray(a);b=h.getNumberWithDefault(b,0);for(var c=new d(a.length+Math.abs(b)),e=-Math.min(b,0),f=Math.max(b,0),k=c.rows()-Math.abs(b),l=1;l<=k;l++)c.___set(l+e,l+f,a[l-1]);return c};d.random=function(a,b,c,e,f){b=h.getNumberWithDefault(b,a);c=h.getNumberWithDefault(c,d.options.random.minVal);e=h.getNumberWithDefault(e,d.options.random.maxVal);
f=h.getBooleanWithDefault(f,d.options.random.onlyInteger);var k=new d(a,b);e=e-c+(f?1:0);for(var l,n=1;n<=a;n++)for(var p=1;p<=b;p++)l=c+Math.random()*e,f&&(l|=0),k.___set(n,p,l);return k};h.linspace=function(a,b,c){c=h.getNumberWithDefault(c,1);for(var d=[];a<=b;a+=c)d.push(a);return d};h.repeat=function(a,b){for(var c=[],d=1;d<=a;d++)c[d-1]=b;return c};h.toArray=function(a){if(a instanceof Array)return a;if(!a.isVector())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Argument has to be vector");var b=
a.copy();a.dim("max")!==a.rows()&&(b=b.transpose());a=[];for(var c=b.rows(),d=1;d<=c;d++)a.push(b.___get(d,1));return a};h.getNumberWithDefault=function(a,b){return c(a)?a:b};h.getStringWithDefault=function(a,b){return"string"===typeof a?a:b};h.getBooleanWithDefault=function(a,b){return"boolean"===typeof a?a:b};h.filters={all:function(){return!0},nonZero:function(a){return 0!==a},diag:function(a,b,c){return b===c}};h.applicators={exp:function(a){return Math.exp(a)},square:function(a){return a*a}};
Array.prototype.toMatrix=function(a,b){return new d(this,a,b)};Array.prototype.toVector=function(a){a=h.getBooleanWithDefault(a,!1);return new d(this,a?1:this.length,a?this.length:1)};String.prototype.toMatrix=function(a,b){a=h.getStringWithDefault(a,"\r\n");b=h.getStringWithDefault(b,"\t");for(var c=this.split(a),e,f=0,l=new d(0),q=0;q<c.length;q++){e=c[q].split(b);0===f&&(f=e.length,l=new d(c.length,f));if(e.length!==f)throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Number of columns is inconsistent");
for(var n=1;n<=f;n++)l.___set(q+1,n,Number(e[n-1]))}return l};a.Matrix=d;a.SparseMatrix=t;a.Vector=function(a){[].slice.call(arguments);var b=[];this.___get=function(a,c){return b[c-1]};this.___set=function(a,c,d){b[c-1]=d;return this};this.rows=function(){return 1};this.columns=function(){return b.length};return this};a.MatrixUtils=h})(window);
