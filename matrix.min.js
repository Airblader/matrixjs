var COMPILED=!0,goog=goog||{};goog.global=this;goog.define=function(a,c){var d=c;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(d=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,d)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.exportPath_=function(a,c,d){a=a.split(".");d=d||goog.global;!(a[0]in d)&&d.execScript&&d.execScript("var "+a[0]);for(var h;a.length&&(h=a.shift());)!a.length&&goog.isDef(c)?d[h]=c:d=d[h]?d[h]:d[h]={}};goog.getObjectByName=function(a,c){for(var d=a.split("."),h=c||goog.global,m;m=d.shift();)if(goog.isDefAndNotNull(h[m]))h=h[m];else return null;return h};
goog.globalize=function(a,c){var d=c||goog.global,h;for(h in a)d[h]=a[h]};goog.addDependency=function(a,c,d){if(!COMPILED){var h;a=a.replace(/\\/g,"/");for(var m=goog.dependencies_,p=0;h=c[p];p++)m.nameToPath[h]=a,a in m.pathToNames||(m.pathToNames[a]={}),m.pathToNames[a][h]=!0;for(h=0;c=d[h];h++)a in m.requires||(m.requires[a]={}),m.requires[a][c]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var c=goog.getPathFromDeps_(a);if(c){goog.included_[c]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,c){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];
!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),c=a.length-1;0<=c;--c){var d=a[c].src,h=d.lastIndexOf("?"),h=
-1==h?d.length:h;if("base.js"==d.substr(h-7,7)){goog.basePath=d.substr(0,h-7);break}}},goog.importScript_=function(a){var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&c(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var c=goog.global.document;if("complete"==c.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}c.write('<script type="text/javascript" src="'+
a+'">\x3c/script>');return!0}return!1},goog.writeScripts_=function(){function a(m){if(!(m in h.written)){if(!(m in h.visited)&&(h.visited[m]=!0,m in h.requires))for(var n in h.requires[m])if(!goog.isProvided_(n))if(n in h.nameToPath)a(h.nameToPath[n]);else throw Error("Undefined nameToPath for "+n);m in d||(d[m]=!0,c.push(m))}}var c=[],d={},h=goog.dependencies_,m;for(m in goog.included_)h.written[m]||a(m);for(m=0;m<c.length;m++)if(c[m])goog.importScript_(goog.basePath+c[m]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var d=Object.prototype.toString.call(a);if("[object Window]"==d)return"object";if("[object Array]"==d||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==d||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var c=goog.typeOf(a);return"array"==c||"object"==c&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var c=typeof a;return"object"==c&&null!=a||"function"==c};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(c){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var c=goog.typeOf(a);if("object"==c||"array"==c){if(a.clone)return a.clone();var c="array"==c?[]:{},d;for(d in a)c[d]=goog.cloneObject(a[d]);return c}return a};goog.bindNative_=function(a,c,d){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,c,d){if(!a)throw Error();if(2<arguments.length){var h=Array.prototype.slice.call(arguments,2);return function(){var d=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(d,h);return a.apply(c,d)}}return function(){return a.apply(c,arguments)}};goog.bind=function(a,c,d){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,c){var d=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);c.unshift.apply(c,d);return a.apply(this,c)}};goog.mixin=function(a,c){for(var d in c)a[d]=c[d]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var c=goog.global.document,d=c.createElement("script");d.type="text/javascript";d.defer=!1;d.appendChild(c.createTextNode(a));c.body.appendChild(d);
c.body.removeChild(d)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,c){var d=function(a){return goog.cssNameMapping_[a]||a},h=function(a){a=a.split("-");for(var c=[],h=0;h<a.length;h++)c.push(d(a[h]));return c.join("-")},h=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?d:h:function(a){return a};return c?a+"-"+h(c):h(a)};goog.setCssNameMapping=function(a,c){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=c};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,c){var d=c||{},h;for(h in d){var m=(""+d[h]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+h+"\\}","gi"),m)}return a};goog.getMsgWithFallback=function(a,c){return a};goog.exportSymbol=function(a,c,d){goog.exportPath_(a,c,d)};goog.exportProperty=function(a,c,d){a[c]=d};
goog.inherits=function(a,c){function d(){}d.prototype=c.prototype;a.superClass_=c.prototype;a.prototype=new d;a.prototype.constructor=a};
goog.base=function(a,c,d){var h=arguments.callee.caller;if(goog.DEBUG&&!h)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(h.superClass_)return h.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var m=Array.prototype.slice.call(arguments,2),p=!1,n=a.constructor;n;n=n.superClass_&&n.superClass_.constructor)if(n.prototype[c]===h)p=!0;else if(p)return n.prototype[c].apply(a,
m);if(a[c]===h)return a.constructor.prototype[c].apply(a,m);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};(function(a){function c(f){return"number"===typeof f}function d(f){return c(f)&&(f|0)===f}function h(f){for(var b=0;b<f.length;b++)if(!c(f[b]))return!1;return!0}function m(f,b){return"string"===typeof f?f:b}function p(f,b){return"boolean"===typeof f?f:b}function n(){throw Error("This cannot be instantiated");}function k(f,b){this.name="MatrixError";this.code=f;this.message=b;this.toString=function(){return this.name+" ["+this.code+"]: "+(this.message||"No message")}}function e(f){var b=[].slice.call(arguments),
a,l,g=[];this.___get=function(f,b){return g[l*(f-1)+b-1]};this.___set=function(f,b,a){g[l*(f-1)+b-1]=a;return this};this.rows=function(){return a};this.columns=function(){return l};this.___getElements=function(){return g};(function(){if(1===b.length&&b[0]instanceof Array&&0!==b[0].length&&b[0][0]instanceof Array){a=b[0].length;l=-1;for(var f=0;f<b[0].length;f++){if(b[0][f].length!==l&&-1!==l)throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Number of columns must be the same for all rows");if(!h(b[0][f]))throw new k(k.ErrorCodes.INVALID_PARAMETERS,
"Elements must be numbers");l=Math.max(l,b[0][f].length);g=g.concat(b[0][f])}}else if(1<=b.length&&3>=b.length&&b[0]instanceof Array&&(0===b[0].length||c(b[0][0]))){if(!h(b[0]))throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Elements must be numbers");g=b[0];var f=b[1],e=b[2];!c(f)&&!c(e)?f=e=Math.sqrt(g.length):!c(f)&&d(e)?f=g.length/e:d(f)&&!c(e)&&(e=g.length/f);if(!d(f)||!d(e))throw new k(k.ErrorCodes.OUT_OF_BOUNDS,"Array must represent square matrix if no size is given");a=f;l=e}else if(1===b.length&&
d(b[0]))a=b[0],l=b[0],g=n.repeat(a*l,0);else if(2===b.length&&d(b[0])&&d(b[1]))a=b[0],l=b[1],g=n.repeat(a*l,0);else throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Parameters must match a supported signature");})();return this}function s(f){[].slice.call(arguments);var b,a=[],l=[],g=[];this.___get=function(f,b){for(var c=g[f-1];c<g[f];c++)if(l[c]===b)return a[c];return 0};this.___set=function(f,b,c){var e=g[f];a.splice(e,0,c);for(l.splice(e,0,b);f<g.length;f++)g[f]+=1;return this};this.rows=function(){return g.length-
1};this.columns=function(){return b};a=[1,2,3];l=[1,2,3];g=[0,1,2,3];b=3;return this}k.ErrorCodes={INVALID_PARAMETERS:"Invalid parameters",OUT_OF_BOUNDS:"Out of bounds",DIMENSION_MISMATCH:"Dimension mismatch",MATRIX_IS_SINGULAR:"Matrix is singular",UNKNOWN_TYPE:"Unknown type"};e.options={stringify:{rowSeparator:"\r\n",columnSeparator:"\t"},isTriangular:{mode:"both"},roundTo:{digits:0},norm:{which:"max"},random:{minVal:0,maxVal:1,onlyInteger:!0}};e.prototype.get=function(f,b){if(!this.isInRange(f,
b))throw new k(k.ErrorCodes.OUT_OF_BOUNDS);return this.___get(f,b)};e.prototype.set=function(f,b,a){if(!this.isInRange(f,b))throw new k(k.ErrorCodes.OUT_OF_BOUNDS);if(!c(a))throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Value has to be a number");return this.___set(f,b,a)};e.prototype.getRow=function(f,b){b=p(b,!1);if(!this.isInRange(f,null))throw new k(k.ErrorCodes.OUT_OF_BOUNDS);return this.__getRow(f,b)};e.prototype.__getRow=function(f,b){for(var a=[],l=this.columns(),g=1;g<=l;g++)a.push(this.___get(f,
g));return b?new e(a,1):a};e.prototype.setRow=function(f,b){b=n.toArray(b);if(!this.isInRange(f,null))throw new k(k.ErrorCodes.OUT_OF_BOUNDS);if(b.length!==this.columns())throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Wrong number of columns in row.");return this.__setRow(f,b)};e.prototype.__setRow=function(f,b){for(var a=this.columns(),l=1;l<=a;l++)this.___set(f,l,b[l-1]);return this};e.prototype.getColumn=function(f,b){b=p(b,!1);if(!this.isInRange(null,f))throw new k(k.ErrorCodes.OUT_OF_BOUNDS);return this.__getColumn(f,
b)};e.prototype.__getColumn=function(f,b){for(var a=[],l=this.rows(),g=1;g<=l;g++)a.push(this.___get(g,f));return b?new e(a,null,1):a};e.prototype.setColumn=function(f,b){b=n.toArray(b);if(!this.isInRange(null,f))throw new k(k.ErrorCodes.OUT_OF_BOUNDS);if(b.length!==this.rows())throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Wrong number of rows in column");return this.__setColumn(f,b)};e.prototype.__setColumn=function(f,b){for(var a=this.rows(),l=1;l<=a;l++)this.___set(l,f,b[l-1]);return this};e.prototype.isSameSizeAs=
function(f){return this.rows()===f.rows()&&this.columns()===f.columns()};e.prototype.isSparse=function(){return this instanceof s};e.prototype.isVector=function(){return 1===this.dim("min")};e.prototype.isSquare=function(){return this.rows()===this.columns()};e.prototype.isSymmetric=function(){if(!this.isSquare())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");for(var f=this.rows(),b=2;b<=f;b++)for(var a=1;a<b;a++)if(this.___get(b,a)!==this.___get(a,b))return!1;return!0};e.prototype.isTriangular=
function(f){f=m(f,e.options.isTriangular.mode);if(!this.isSquare())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");switch(f.toLowerCase()){case "lower":return this.__isTriangular(!1);case "upper":return this.__isTriangular(!0);case "both":return this.__isTriangular(!0)||this.__isTriangular(!1);default:throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Mode not supported");}};e.prototype.__isTriangular=function(f){f=f?1:-1;for(var b,a,l=this.rows(),g=1;g<l;g++){b=this.diag(f*g);a=b.length;
for(var c=0;c<a;c++)if(0!==b[c])return!1}return!0};e.prototype.copy=function(){return new e(this.toArray(),this.rows(),this.columns())};e.prototype.size=function(){return this.rows()*this.columns()};e.prototype.dim=function(f){switch(f){case 1:case "rows":return this.rows();case 2:case "columns":return this.columns();case "max":return Math.max(this.rows(),this.columns());case "min":return Math.min(this.rows(),this.columns());default:throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Parameter must match a known value");
}};e.prototype.add=function(f){var b=this.rows(),a=this.columns();if(1<arguments.length)return b=[].slice.call(arguments),this.add.apply(this.add(b.shift()),b);if(!this.isSameSizeAs(f))throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrices must be of the same size");for(var l=new e(b,a),g,c,q=1;q<=b;q++){g=this.__getRow(q,!1);c=f.__getRow(q,!1);for(var d=0;d<a;d++)g[d]+=c[d];l.__setRow(q,g)}return l};e.prototype.subtract=function(f){var b=this.rows(),a=this.columns();if(1<arguments.length)return b=
[].slice.call(arguments),this.subtract.apply(this.subtract(b.shift()),b);if(!this.isSameSizeAs(f))throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrices must be of the same size");for(var l=new e(b,a),c,d,q=1;q<=b;q++){c=this.__getRow(q,!1);d=f.__getRow(q,!1);for(var h=0;h<a;h++)c[h]-=d[h];l.__setRow(q,c)}return l};e.prototype.scale=function(f){if(!c(f))throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Parameter must be a number");for(var b=this.rows(),a=this.columns(),l=new e(b,a),g,d=1;d<=b;d++){g=this.__getRow(d,
!1);for(var q=0;q<a;q++)g[q]*=f;l.__setRow(d,g)}return l};e.prototype.multiply=function(f){var b=this.rows(),a=this.columns(),c=f.columns();if(a!==f.rows())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Inner dimensions must match");for(var g=new e(b,c),d=1;d<=b;d++)for(var q=1;q<=c;q++){for(var h=0,m=this.__getRow(d,!1),n=f.__getColumn(q,!1),p=0;p<a;p++)h+=m[p]*n[p];g.___set(d,q,h)}return g};e.prototype.transpose=function(){for(var f=this.rows(),b=new e(this.columns(),f),a=1;a<=f;a++)b.__setColumn(a,
this.__getRow(a,!1));return b};e.prototype.trace=function(){if(!this.isSquare())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");for(var f=this.rows(),b=0,a=1;a<=f;a++)b+=this.___get(a,a);return b};e.prototype.decomposeLU=function(){var f=0,b=this.copy(),a,c,g,e,d,h=this.rows(),m=this.columns(),n;for(g=1;g<=h;g++){c=0;d=-1;e=b.__getColumn(g,!1);for(a=g;a<=h;a++)n=Math.abs(e[a-1]),n>=d&&(c=a,d=n);if(0===e[c-1])throw new k(k.ErrorCodes.MATRIX_IS_SINGULAR);c!==g&&(a=b.__getRow(c,
!1),b.__setRow(c,b.__getRow(g,!1)),b.__setRow(g,a),f++);e=b.__getRow(g,!1);for(a=g+1;a<=h;a++){d=b.__getRow(a,!1);for(c=g;c<m;c++)d[c]-=e[c]*d[g-1]/e[g-1];d[g-1]=0;b.__setRow(a,d)}}b.swappedRows=f;return b};e.prototype.det=function(){var f,a,c,l=this.rows();if(!this.isSquare())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");if(this.isTriangular())a=1,c=this.diag();else{try{f=this.decomposeLU()}catch(g){if(g.code&&g.code===k.ErrorCodes.MATRIX_IS_SINGULAR)return 0;throw g;}a=Math.pow(-1,
f.swappedRows);c=f.diag()}for(f=0;f<l;f++)a*=c[f];return a};e.prototype.inverse=function(){if(!this.isSquare())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");var f=this.augment(e.eye(this.rows())),a,c,l,g,d,h,m,n,p;try{f=f.decomposeLU();n=f.rows();p=f.columns();for(g=n;1<g;g--){c=f.__getRow(g-1,!1);a=f.__getRow(g,!1);m=c[g-1]/a[g-1];l=[];for(h=0;h<p;h++)l[h]=c[h]-a[h]*m;f.__setRow(g-1,l)}for(d=1;d<=n;d++){a=f.__getRow(d,!1);l=[];for(h=0;h<p;h++)l[h]=a[h]/a[d-1];f.__setRow(d,
l)}}catch(s){throw new k(k.ErrorCodes.MATRIX_IS_SINGULAR);}return f.submatrix(1,n,this.columns()+1,p)};e.prototype.submatrix=function(a,b,c,l){if(!this.isInRange(a,c)||!this.isInRange(b,l)||a>b||c>l)throw new k(k.ErrorCodes.OUT_OF_BOUNDS);for(var g=new e(b-a+1,l-c+1),d=a;d<=b;d++)g.__setRow(d-a+1,this.__getRow(d,!1).slice(c-1,l));return g};e.prototype.augment=function(a){var b=this.rows(),c=this.columns(),l=a.columns();if(b!==a.rows())throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Number of rows must match");
for(var b=new e(b,c+l),g=1;g<=c;g++)b.__setColumn(g,this.__getColumn(g,!1));for(g=1;g<=l;g++)b.__setColumn(g+c,a.__getColumn(g,!1));return b};e.prototype.dot=function(a){var b=this.rows();if(!this.isVector()||!a.isVector()||1!==this.columns()||1!==a.columns())throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Parameter must be a column vector");if(b!==a.rows())throw new k(k.ErrorCodes.DIMENSION_MISMATCH);for(var c=0,l=1;l<=b;l++)c+=this.___get(l,1)*a.___get(l,1);return c};e.prototype.round=function(){return this.roundTo(0)};
e.prototype.roundTo=function(a){a=c(a)?a:e.options.roundTo.digits;var b=Math.pow(10,a);return this.fun(function(a){return Math.round(a*b)/b})};e.prototype.abs=function(){return this.fun(function(a){return Math.abs(a)})};e.prototype.cross=function(a){if(!this.isVector()||!a.isVector()||3!==this.rows()||3!==a.rows())throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Parameters must be three-dimensional column vectors");return new e([[this.___get(2,1)*a.___get(3,1)-this.___get(3,1)*a.___get(2,1)],[this.___get(3,
1)*a.___get(1,1)-this.___get(1,1)*a.___get(3,1)],[this.___get(1,1)*a.___get(2,1)-this.___get(2,1)*a.___get(1,1)]])};e.prototype.addRow=function(a){a=n.toArray(a);for(var b=this.rows(),c=new e(b+1,this.columns()),l=1;l<=b;l++)c.__setRow(l,this.__getRow(l,!1));c.__setRow(b+1,a);return c};e.prototype.addColumn=function(a){return this.copy().augment(new e(n.toArray(a),null,1))};e.prototype.contains=function(a,b){b=c(b)?b:0;var d=this.rows(),l=this.columns(),g;if(!c(a)||!c(b))throw new k(k.ErrorCodes.INVALID_PARAMETERS,
"Parameter must be a number");for(var e=1;e<=d;e++){g=this.__getRow(e,!1);for(var h=0;h<l;h++)if(0===b){if(g[h]===a)return!0}else if(Math.abs(g[h]-a)<=b)return!0}return!1};e.prototype.stringify=function(a,b){a=m(a,e.options.stringify.rowSeparator);b=m(b,e.options.stringify.columnSeparator);for(var c=[],l,g=this.rows(),d=1;d<=g;d++)l=this.__getRow(d,!1),c.push(l.join(b));return c.join(a)};e.prototype.equals=function(a){var b=this.rows(),c=this.columns(),l,g;if(!this.isSameSizeAs(a))return!1;for(var d=
1;d<=b;d++){l=this.__getRow(d,!1);g=a.__getRow(d,!1);for(var e=0;e<c;e++)if(l[e]!==g[e])return!1}return!0};e.prototype.fun=function(a,b){b=b||n.filters.all;if("function"!==typeof a)throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Applicator must be a function");if("function"!==typeof b)throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Filter must be a function");for(var c,d,g=this.rows(),h=this.columns(),m=new e(g,h),p=1;p<=g;p++){d=this.__getRow(p,!1);for(var r=1;r<=h;r++)c=d[r-1],b(c,p,r)&&(d[r-1]=a(c,p,
r));m.__setRow(p,d)}return m};e.prototype.spfun=function(a){return this.fun(a,n.filters.nonZero)};e.prototype.pw_exp=function(){return this.fun(n.applicators.exp,null)};e.prototype.pw_pow=function(a){return this.fun(function(b){return Math.pow(b,a)},null)};e.prototype.norm=function(a,b){a=m(a,e.options.norm.which);b=b||{};switch(a.toLowerCase()){case "p":case "pnorm":return this.pnorm(Number(b));case "frobenius":return this.pnorm(2);case "rows":case "rowsum":return this.rownorm();case "columns":case "columnsum":return this.columnnorm();
case "max":return this.maxnorm();default:throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Norm not supported");}};e.prototype.pnorm=function(a){if(!d(a))throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Parameter must be an integer");for(var b=0,c=this.rows(),e=this.columns(),g,h=1;h<=c;h++){g=this.__getRow(h,!1);for(var m=0;m<e;m++)b+=Math.pow(Math.abs(g[m]),a)}return Math.pow(b,1/a)};e.prototype.maxnorm=function(){for(var a=0,b=this.rows(),c=this.columns(),d,g=1;g<=b;g++){d=this.__getRow(g,!1);for(var e=
0;e<c;e++)a=Math.max(a,Math.abs(d[e]))}return a};e.prototype.rownorm=function(){for(var a=0,b=this.rows(),c=1;c<=b;c++)a=Math.max(a,this.__getRow(c,!0).pnorm(1));return a};e.prototype.columnnorm=function(){for(var a=0,b=this.columns(),c=1;c<=b;c++)a=Math.max(a,this.__getColumn(c,!0).pnorm(1));return a};e.prototype.diag=function(a){a=c(a)?a:0;var b=[],d=-Math.min(a,0);a=Math.max(a,0);var e=0===d?this.columns()-a:this.rows()-d;if(0>=e)throw new k(k.ErrorCodes.OUT_OF_BOUNDS);for(var g=1;g<=e;g++)b.push(this.___get(g+
d,g+a));return b};e.prototype.isInRange=function(a,b){return(!c(a)||1<=a&&a<=this.rows())&&(!c(b)||1<=b&&b<=this.columns())};e.prototype.toArray=function(){return[].slice.call(this.___getElements())};e.zeros=function(a,b){b=c(b)?b:a;return new e(a,b)};e.ones=function(a,b){b=c(b)?b:a;for(var d=new e(a,b),l=1;l<=a;l++)for(var g=1;g<=b;g++)d.___set(l,g,1);return d};e.eye=function(a){for(var b=new e(a,a),c=1;c<=a;c++)b.___set(c,c,1);return b};e.diag=function(a,b){a=n.toArray(a);b=c(b)?b:0;for(var d=new e(a.length+
Math.abs(b)),l=-Math.min(b,0),g=Math.max(b,0),h=d.rows()-Math.abs(b),k=1;k<=h;k++)d.___set(k+l,k+g,a[k-1]);return d};e.random=function(a,b,d,l,g){b=c(b)?b:a;d=c(d)?d:e.options.random.minVal;l=c(l)?l:e.options.random.maxVal;g=p(g,e.options.random.onlyInteger);var h=new e(a,b);l=l-d+(g?1:0);for(var k,m=1;m<=a;m++)for(var n=1;n<=b;n++)k=d+Math.random()*l,g&&(k|=0),h.___set(m,n,k);return h};n.linspace=function(a,b,d){d=c(d)?d:1;for(var e=[];a<=b;a+=d)e.push(a);return e};n.repeat=function(a,b){for(var c=
[],d=1;d<=a;d++)c[d-1]=b;return c};n.toArray=function(a){if(a instanceof Array)return a;if(!a.isVector())throw new k(k.ErrorCodes.DIMENSION_MISMATCH,"Argument has to be vector");var b=a.copy();a.dim("max")!==a.rows()&&(b=b.transpose());a=[];for(var c=b.rows(),d=1;d<=c;d++)a.push(b.___get(d,1));return a};n.filters={all:function(){return!0},nonZero:function(a){return 0!==a},diag:function(a,b,c){return b===c}};n.applicators={exp:function(a){return Math.exp(a)},square:function(a){return a*a}};Array.prototype.toMatrix=
function(a,b){return new e(this,a,b)};Array.prototype.toVector=function(a){a=p(a,!1);return new e(this,a?1:this.length,a?this.length:1)};String.prototype.toMatrix=function(a,b){a=m(a,"\r\n");b=m(b,"\t");for(var c=this.split(a),d,g=0,h=new e(0),n=0;n<c.length;n++){d=c[n].split(b);0===g&&(g=d.length,h=new e(c.length,g));if(d.length!==g)throw new k(k.ErrorCodes.INVALID_PARAMETERS,"Number of columns is inconsistent");for(var p=1;p<=g;p++)h.___set(n+1,p,Number(d[p-1]))}return h};a.Matrix=e;a.SparseMatrix=
s;a.Vector=function(a){[].slice.call(arguments);var b=[];this.___get=function(a,c){return b[c-1]};this.___set=function(a,c,d){b[c-1]=d;return this};this.rows=function(){return 1};this.columns=function(){return b.length};return this};a.MatrixUtils=n})(window);
