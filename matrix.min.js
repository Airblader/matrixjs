var COMPILED=!0,goog=goog||{};goog.global=this;goog.define=function(a,c){var e=c;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(e=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,e)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var c=a;(c=c.substring(0,c.lastIndexOf(".")))&&!goog.getObjectByName(c);)goog.implicitNamespaces_[c]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.exportPath_=function(a,c,e){a=a.split(".");e=e||goog.global;!(a[0]in e)&&e.execScript&&e.execScript("var "+a[0]);for(var g;a.length&&(g=a.shift());)!a.length&&goog.isDef(c)?e[g]=c:e=e[g]?e[g]:e[g]={}};goog.getObjectByName=function(a,c){for(var e=a.split("."),g=c||goog.global,m;m=e.shift();)if(goog.isDefAndNotNull(g[m]))g=g[m];else return null;return g};
goog.globalize=function(a,c){var e=c||goog.global,g;for(g in a)e[g]=a[g]};goog.addDependency=function(a,c,e){if(!COMPILED){var g;a=a.replace(/\\/g,"/");for(var m=goog.dependencies_,s=0;g=c[s];s++)m.nameToPath[g]=a,a in m.pathToNames||(m.pathToNames[a]={}),m.pathToNames[a][g]=!0;for(g=0;c=e[g];g++)a in m.requires||(m.requires[a]={}),m.requires[a][c]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var c=goog.getPathFromDeps_(a);if(c){goog.included_[c]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,c){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];
!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),c=a.length-1;0<=c;--c){var e=a[c].src,g=e.lastIndexOf("?"),g=
-1==g?e.length:g;if("base.js"==e.substr(g-7,7)){goog.basePath=e.substr(0,g-7);break}}},goog.importScript_=function(a){var c=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&c(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var c=goog.global.document;if("complete"==c.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}c.write('<script type="text/javascript" src="'+
a+'">\x3c/script>');return!0}return!1},goog.writeScripts_=function(){function a(m){if(!(m in g.written)){if(!(m in g.visited)&&(g.visited[m]=!0,m in g.requires))for(var r in g.requires[m])if(!goog.isProvided_(r))if(r in g.nameToPath)a(g.nameToPath[r]);else throw Error("Undefined nameToPath for "+r);m in e||(e[m]=!0,c.push(m))}}var c=[],e={},g=goog.dependencies_,m;for(m in goog.included_)g.written[m]||a(m);for(m=0;m<c.length;m++)if(c[m])goog.importScript_(goog.basePath+c[m]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var c=typeof a;if("object"==c)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return c;var e=Object.prototype.toString.call(a);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==c&&"undefined"==typeof a.call)return"object";return c};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var c=goog.typeOf(a);return"array"==c||"object"==c&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var c=typeof a;return"object"==c&&null!=a||"function"==c};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(c){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var c=goog.typeOf(a);if("object"==c||"array"==c){if(a.clone)return a.clone();var c="array"==c?[]:{},e;for(e in a)c[e]=goog.cloneObject(a[e]);return c}return a};goog.bindNative_=function(a,c,e){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,c,e){if(!a)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,g);return a.apply(c,e)}}return function(){return a.apply(c,arguments)}};goog.bind=function(a,c,e){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,c){var e=Array.prototype.slice.call(arguments,1);return function(){var c=Array.prototype.slice.call(arguments);c.unshift.apply(c,e);return a.apply(this,c)}};goog.mixin=function(a,c){for(var e in c)a[e]=c[e]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var c=goog.global.document,e=c.createElement("script");e.type="text/javascript";e.defer=!1;e.appendChild(c.createTextNode(a));c.body.appendChild(e);
c.body.removeChild(e)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,c){var e=function(a){return goog.cssNameMapping_[a]||a},g=function(a){a=a.split("-");for(var c=[],g=0;g<a.length;g++)c.push(e(a[g]));return c.join("-")},g=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?e:g:function(a){return a};return c?a+"-"+g(c):g(a)};goog.setCssNameMapping=function(a,c){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=c};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,c){var e=c||{},g;for(g in e){var m=(""+e[g]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+g+"\\}","gi"),m)}return a};goog.getMsgWithFallback=function(a,c){return a};goog.exportSymbol=function(a,c,e){goog.exportPath_(a,c,e)};goog.exportProperty=function(a,c,e){a[c]=e};
goog.inherits=function(a,c){function e(){}e.prototype=c.prototype;a.superClass_=c.prototype;a.prototype=new e;a.prototype.constructor=a};
goog.base=function(a,c,e){var g=arguments.callee.caller;if(goog.DEBUG&&!g)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(g.superClass_)return g.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var m=Array.prototype.slice.call(arguments,2),s=!1,r=a.constructor;r;r=r.superClass_&&r.superClass_.constructor)if(r.prototype[c]===g)s=!0;else if(s)return r.prototype[c].apply(a,
m);if(a[c]===g)return a.constructor.prototype[c].apply(a,m);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};(function(a){function c(d){return"number"===typeof d}function e(d){return c(d)&&(d|0)===d}function g(d){return d instanceof Array}function m(d){for(var b=0;b<d.length;b++)if(!c(d[b]))return!1;return!0}function s(d,b){return"string"===typeof d?d:b}function r(d){if(g(d))return d;if(1!==d.dim("min"))throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Argument has to be vector");d=d.dim("max")===d.rows()?d.__getColumn(1):d.__getRow(1);for(var b=[],a=1;a<=d.length;a++)b.push(d[a-1]);return b}function q(){throw Error("This cannot be instantiated");
}function f(d,b){this.name="MatrixError";this.code=d;this.message=b;this.toString=function(){return this.name+" ["+this.code+"]: "+(this.message||"No message")}}function h(d){var b=[].slice.call(arguments),a,l,n=[];this.___get=function(b,d){return n[l*(b-1)+d-1]};this.___set=function(b,d,a){n[l*(b-1)+d-1]=a;return this};this.rows=function(){return a};this.columns=function(){return l};this.___getElements=function(){return n};(function(){if(1===b.length&&g(b[0])&&0!==b[0].length&&g(b[0][0])){a=b[0].length;
l=-1;for(var d=0;d<b[0].length;d++){if(b[0][d].length!==l&&-1!==l)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Number of columns must be the same for all rows");if(!m(b[0][d]))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Elements must be numbers");l=Math.max(l,b[0][d].length);n=n.concat(b[0][d])}}else if(1<=b.length&&3>=b.length&&g(b[0])&&(0===b[0].length||c(b[0][0]))){if(!m(b[0]))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Elements must be numbers");n=b[0];var d=b[1],k=b[2];!c(d)&&!c(k)?d=k=Math.sqrt(n.length):
!c(d)&&e(k)?d=n.length/k:e(d)&&!c(k)&&(k=n.length/d);if(!e(d)||!e(k))throw new f(f.ErrorCodes.OUT_OF_BOUNDS,"Array must represent square matrix if no size is given");a=d;l=k}else if(1===b.length&&e(b[0]))a=b[0],l=b[0],n=q.repeat(a*l,0);else if(2===b.length&&e(b[0])&&e(b[1]))a=b[0],l=b[1],n=q.repeat(a*l,0);else throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Parameters must match a supported signature");})();return this}function p(d){var b=[].slice.call(arguments),a,l,n=[],c=[],k=[];this.___get=function(d,
b){for(var a=k[d-1];a<k[d];a++)if(c[a]===b)return n[a];return 0};this.___set=function(d,b,a){for(var l,t=!1,f=k[d-1];f<=k[d];f++)if(l=f,c[f]===b){t=!0;break}if(!t&&0!==a){for(;d<k.length;d++)k[d]+=1;n.splice(l,0,a);c.splice(l,0,b)}else if(t&&0!==a)n.splice(l,1,a),c.splice(l,1,b);else{for(;d<k.length;d++)k[d]-=1;n.splice(l,1);c.splice(l,1)}return this};this.___getElements=function(){return n};this.___getColumnIndicator=function(){return c};this.___getRowPointer=function(){return k};this.rows=function(){return a};
this.columns=function(){return l};(function(){if(1<=b.length&&2>=b.length&&e(b[0])&&(1===b.length||e(b[1])))a=b[0],l=b[1]||a,n=[],c=[],k=q.repeat(a+1,0);else if(5===b.length&&e(b[0])&&e(b[1])&&g(b[2])&&g(b[3])&&g(b[4])){a=b[0];l=b[1];n=b[2];c=b[3];k=b[4];if(-1!==n.indexOf(0))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Values must not be 0");if(a!=k.length-1)throw new f(f.ErrorCodes.OUT_OF_BOUNDS,"Number of rows is too small");if(n.length!==c.length)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Arrays for values and column indicators have to be the same size");
if(Math.max.apply(this,c)>l)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Number of columns has to be bigger than the biggest column index");}else{if(1===b.length&&b[0]instanceof v)return b[0].build();throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Parameters must match a supported signature");}})();return this}function v(){var d,b,a=[];this.size=function(a,t){d=a;b=c(t)?t:a;return this};this.set=function(l,n,u){if(!e(d)||!e(b))throw new f(f.ErrorCodes.SIZE_NOT_GIVEN,"Size has to be specified first");
if(!c(u))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Value is not numeric");if(0!==a.filter(function(d){return d.row===l&&d.column===n}).length)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Cannot set same entry multiple times");if(l>d||n>b)throw new f(f.ErrorCodes.OUT_OF_BOUNDS);0!==u&&a.push({row:l,column:n,value:u});return this};this.build=function(){a.sort(function(d,b){return d.row!=b.row?d.row<b.row?-1:1:d.column!=b.column?d.column<b.column?-1:1:0});for(var l=[],n=q.repeat(d+1,0),c=[],f=1,e=
0;e<a.length;e++){var h=a[e];l[e]=h.value;c[e]=h.column;if(0===n[h.row])for(f+=1;f<=h.row;f++)n[f]=n[f-1];n[h.row]++;f=h.row}n[d]=c.length;return new p(d,b,l,c,n)}}f.ErrorCodes={INVALID_PARAMETERS:"Invalid parameters",OUT_OF_BOUNDS:"Out of bounds",DIMENSION_MISMATCH:"Dimension mismatch",MATRIX_IS_SINGULAR:"Matrix is singular",UNKNOWN_TYPE:"Unknown type",SIZE_NOT_GIVEN:"Size not given"};h.prototype.get=function(d,b){if(!this.isInRange(d,b))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);return this.___get(d,
b)};h.prototype.set=function(d,b,a){if(!this.isInRange(d,b))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);if(!c(a))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Value has to be a number");return this.___set(d,b,a)};h.prototype.getRow=function(d){if(!this.isInRange(d,null))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);return this.__getRow(d)};h.prototype.__getRow=function(d){for(var b=[],a=this.columns(),l=1;l<=a;l++)b.push(this.___get(d,l));return b};h.prototype.setRow=function(d,b){b=r(b);if(!this.isInRange(d,
null))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);if(b.length!==this.columns())throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Wrong number of columns in row.");return this.__setRow(d,b)};h.prototype.__setRow=function(d,b){for(var a=this.columns(),l=1;l<=a;l++)this.___set(d,l,b[l-1]);return this};h.prototype.getColumn=function(d){if(!this.isInRange(null,d))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);return this.__getColumn(d)};h.prototype.__getColumn=function(d){for(var b=[],a=this.rows(),l=1;l<=a;l++)b.push(this.___get(l,
d));return b};h.prototype.setColumn=function(d,b){b=r(b);if(!this.isInRange(null,d))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);if(b.length!==this.rows())throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Wrong number of rows in column");return this.__setColumn(d,b)};h.prototype.__setColumn=function(d,b){for(var a=this.rows(),l=1;l<=a;l++)this.___set(l,d,b[l-1]);return this};h.prototype.isSameSizeAs=function(d){return this.rows()===d.rows()&&this.columns()===d.columns()};h.prototype.isSquare=function(){return this.rows()===
this.columns()};h.prototype.isSymmetric=function(){if(!this.isSquare())throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");for(var d=this.rows(),b=2;b<=d;b++)for(var a=1;a<b;a++)if(this.___get(b,a)!==this.___get(a,b))return!1;return!0};h.prototype.isTriangular=function(d){d=s(d,q.options.isTriangular.mode);if(!this.isSquare())throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");switch(d.toLowerCase()){case "lower":return this.__isTriangular(!1);case "upper":return this.__isTriangular(!0);
case "both":return this.__isTriangular(!0)||this.__isTriangular(!1);default:throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Mode not supported");}};h.prototype.__isTriangular=function(d){d=d?1:-1;for(var b,a,l=this.rows(),n=1;n<l;n++){b=this.diag(d*n);a=b.length;for(var c=0;c<a;c++)if(0!==b[c])return!1}return!0};h.prototype.copy=function(){return new h(this.toArray(),this.rows(),this.columns())};h.prototype.size=function(){return this.rows()*this.columns()};h.prototype.dim=function(d){switch(d){case 1:case "rows":return this.rows();
case 2:case "columns":return this.columns();case "max":return Math.max(this.rows(),this.columns());case "min":return Math.min(this.rows(),this.columns());default:throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Parameter must match a known value");}};h.prototype.add=function(d){var b=this.rows(),a=this.columns();if(1<arguments.length)return b=[].slice.call(arguments),this.add.apply(this.add(b.shift()),b);if(!this.isSameSizeAs(d))throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrices must be of the same size");
for(var l=new h(b,a),n,c,k=1;k<=b;k++){n=this.__getRow(k);c=d.__getRow(k);for(var e=0;e<a;e++)n[e]+=c[e];l.__setRow(k,n)}return l};h.prototype.subtract=function(d){var b=this.rows(),a=this.columns();if(1<arguments.length)return b=[].slice.call(arguments),this.subtract.apply(this.subtract(b.shift()),b);if(!this.isSameSizeAs(d))throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrices must be of the same size");for(var l=new h(b,a),c,e,k=1;k<=b;k++){c=this.__getRow(k);e=d.__getRow(k);for(var g=0;g<a;g++)c[g]-=
e[g];l.__setRow(k,c)}return l};h.prototype.scale=function(d){if(!c(d))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Parameter must be a number");for(var b=this.rows(),a=this.columns(),l=new h(b,a),n,e=1;e<=b;e++){n=this.__getRow(e);for(var k=0;k<a;k++)n[k]*=d;l.__setRow(e,n)}return l};h.prototype.multiply=function(d){var b=this.rows(),a=this.columns(),l=d.columns();if(a!==d.rows())throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Inner dimensions must match");for(var c=new h(b,l),e=1;e<=b;e++)for(var k=
1;k<=l;k++){for(var g=0,m=this.__getRow(e),q=d.__getColumn(k),p=0;p<a;p++)g+=m[p]*q[p];c.___set(e,k,g)}return c};h.prototype.transpose=function(){for(var d=this.rows(),b=new h(this.columns(),d),a=1;a<=d;a++)b.__setColumn(a,this.__getRow(a));return b};h.prototype.trace=function(){if(!this.isSquare())throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");for(var d=this.rows(),b=0,a=1;a<=d;a++)b+=this.___get(a,a);return b};h.prototype.decomposeLU=function(){var d=0,b=this.copy(),a,l,c,
e,k,h=this.rows(),g=this.columns(),m;for(c=1;c<=h;c++){l=0;k=-1;e=b.__getColumn(c);for(a=c;a<=h;a++)m=Math.abs(e[a-1]),m>=k&&(l=a,k=m);if(0===e[l-1])throw new f(f.ErrorCodes.MATRIX_IS_SINGULAR);l!==c&&(a=b.__getRow(l),b.__setRow(l,b.__getRow(c)),b.__setRow(c,a),d++);e=b.__getRow(c);for(a=c+1;a<=h;a++){k=b.__getRow(a);for(l=c;l<g;l++)k[l]-=e[l]*k[c-1]/e[c-1];k[c-1]=0;b.__setRow(a,k)}}b.swappedRows=d;return b};h.prototype.det=function(){var d,b,a,l=this.rows();if(!this.isSquare())throw new f(f.ErrorCodes.DIMENSION_MISMATCH,
"Matrix must be square");if(this.isTriangular())b=1,a=this.diag();else{try{d=this.decomposeLU()}catch(c){if(c.code&&c.code===f.ErrorCodes.MATRIX_IS_SINGULAR)return 0;throw c;}b=Math.pow(-1,d.swappedRows);a=d.diag()}for(d=0;d<l;d++)b*=a[d];return b};h.prototype.inverse=function(){if(!this.isSquare())throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");var d=this.augment(h.eye(this.rows())),b,a,c,n,e,k,g,m,q;try{d=d.decomposeLU();m=d.rows();q=d.columns();for(n=m;1<n;n--){a=d.__getRow(n-
1);b=d.__getRow(n);g=a[n-1]/b[n-1];c=[];for(k=0;k<q;k++)c[k]=a[k]-b[k]*g;d.__setRow(n-1,c)}for(e=1;e<=m;e++){b=d.__getRow(e);c=[];for(k=0;k<q;k++)c[k]=b[k]/b[e-1];d.__setRow(e,c)}}catch(p){throw new f(f.ErrorCodes.MATRIX_IS_SINGULAR);}return d.submatrix(1,m,this.columns()+1,q)};h.prototype.submatrix=function(d,b,a,c){if(!this.isInRange(d,a)||!this.isInRange(b,c)||d>b||a>c)throw new f(f.ErrorCodes.OUT_OF_BOUNDS);for(var e=new h(b-d+1,c-a+1),g=d;g<=b;g++)e.__setRow(g-d+1,this.__getRow(g).slice(a-1,
c));return e};h.prototype.augment=function(d){var b=this.rows(),a=this.columns(),c=d.columns();if(b!==d.rows())throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Number of rows must match");for(var b=new h(b,a+c),e=1;e<=a;e++)b.__setColumn(e,this.__getColumn(e));for(e=1;e<=c;e++)b.__setColumn(e+a,d.__getColumn(e));return b};h.prototype.round=function(){return this.roundTo(0)};h.prototype.roundTo=function(d){d=c(d)?d:q.options.roundTo.digits;var b=Math.pow(10,d);return this.fun(function(d){return Math.round(d*
b)/b})};h.prototype.abs=function(){return this.fun(function(d){return Math.abs(d)})};h.prototype.addRow=function(d){d=r(d);for(var b=this.rows(),a=new h(b+1,this.columns()),c=1;c<=b;c++)a.__setRow(c,this.__getRow(c));a.__setRow(b+1,d);return a};h.prototype.addColumn=function(d){return this.copy().augment(new h(r(d),null,1))};h.prototype.contains=function(d,b){b=c(b)?b:0;var a=this.rows(),l=this.columns(),e;if(!c(d)||!c(b))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Parameter must be a number");for(var h=
1;h<=a;h++){e=this.__getRow(h);for(var k=0;k<l;k++)if(0===b){if(e[k]===d)return!0}else if(Math.abs(e[k]-d)<=b)return!0}return!1};h.prototype.stringify=function(d,b){d=s(d,q.options.stringify.rowSeparator);b=s(b,q.options.stringify.columnSeparator);for(var a=[],c,e=this.rows(),f=1;f<=e;f++)c=this.__getRow(f),a.push(c.join(b));return a.join(d)};h.prototype.equals=function(d){var b=this.rows(),a=this.columns(),c,e;if(!this.isSameSizeAs(d))return!1;for(var f=1;f<=b;f++){c=this.__getRow(f);e=d.__getRow(f);
for(var k=0;k<a;k++)if(c[k]!==e[k])return!1}return!0};h.prototype.fun=function(d,b){b=b||q.filters.all;if("function"!==typeof d)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Applicator must be a function");if("function"!==typeof b)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Filter must be a function");for(var a,c,e=this.rows(),g=this.columns(),k=new h(e,g),m=1;m<=e;m++){c=this.__getRow(m);for(var p=1;p<=g;p++)a=c[p-1],b(a,m,p)&&(c[p-1]=d(a,m,p));k.__setRow(m,c)}return k};h.prototype.spfun=function(d){return this.fun(d,
q.filters.nonZero)};h.prototype.pw_exp=function(){return this.fun(q.applicators.exp,null)};h.prototype.pw_pow=function(d){return this.fun(function(b){return Math.pow(b,d)},null)};h.prototype.norm=function(d,b){d=s(d,q.options.norm.which);b=b||{};switch(d.toLowerCase()){case "p":case "pnorm":return this.pnorm(Number(b));case "frobenius":return this.pnorm(2);case "rows":case "rowsum":return this.rownorm();case "columns":case "columnsum":return this.columnnorm();case "max":return this.maxnorm();default:throw new f(f.ErrorCodes.INVALID_PARAMETERS,
"Norm not supported");}};h.prototype.pnorm=function(d){if(!e(d))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Parameter must be an integer");for(var b=0,a=this.rows(),c=this.columns(),n,h=1;h<=a;h++){n=this.__getRow(h);for(var k=0;k<c;k++)b+=Math.pow(Math.abs(n[k]),d)}return Math.pow(b,1/d)};h.prototype.maxnorm=function(){for(var d=0,b=this.rows(),a=this.columns(),c,e=1;e<=b;e++){c=this.__getRow(e);for(var f=0;f<a;f++)d=Math.max(d,Math.abs(c[f]))}return d};h.prototype.rownorm=function(){for(var d=
0,a=this.rows(),c=1;c<=a;c++)d=Math.max(d,this.__getRow(c).toMatrix(1).pnorm(1));return d};h.prototype.columnnorm=function(){for(var d=0,a=this.columns(),c=1;c<=a;c++)d=Math.max(d,this.__getColumn(c).toMatrix(null,1).pnorm(1));return d};h.prototype.diag=function(d){d=c(d)?d:0;var a=[],e=-Math.min(d,0);d=Math.max(d,0);var l=0===e?this.columns()-d:this.rows()-e;if(0>=l)throw new f(f.ErrorCodes.OUT_OF_BOUNDS);for(var h=1;h<=l;h++)a.push(this.___get(h+e,h+d));return a};h.prototype.isInRange=function(d,
a){return(!c(d)||1<=d&&d<=this.rows())&&(!c(a)||1<=a&&a<=this.columns())};h.prototype.toArray=function(){return[].slice.call(this.___getElements())};h.zeros=function(d,a){a=c(a)?a:d;return new h(d,a)};h.ones=function(d,a){a=c(a)?a:d;for(var e=new h(d,a),f=1;f<=d;f++)for(var g=1;g<=a;g++)e.___set(f,g,1);return e};h.eye=function(d){for(var a=new h(d,d),c=1;c<=d;c++)a.___set(c,c,1);return a};h.diag=function(a,b){a=r(a);b=c(b)?b:0;for(var e=new h(a.length+Math.abs(b)),f=-Math.min(b,0),g=Math.max(b,0),
m=1;m<=a.length;m++)e.___set(m+f,m+g,a[m-1]);return e};h.random=function(a,b,e,f,g){b=c(b)?b:a;e=c(e)?e:q.options.random.minVal;f=c(f)?f:q.options.random.maxVal;g="boolean"===typeof g?g:q.options.random.onlyInteger;var m=new h(a,b);f=f-e+(g?1:0);for(var k,p=1;p<=a;p++)for(var r=1;r<=b;r++)k=e+Math.random()*f,g&&(k|=0),m.___set(p,r,k);return m};p.prototype.get=function(a,b){if(!this.isInRange(a,b))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);return this.___get(a,b)};p.prototype.set=function(a,b,e){if(!this.isInRange(a,
b))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);if(!c(e))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Value has to be a number");return this.___set(a,b,e)};p.prototype.getRow=function(a){if(!this.isInRange(a,null))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);return this.__getRow(a)};p.prototype.__getRow=function(a){for(var b=q.repeat(this.columns(),0),c=this.___getRowPointer(),e=this.___getColumnIndicator(),f=this.___getElements(),g=c[a-1];g<c[a];g++)b[e[g]-1]=f[g];return b};p.prototype.setRow=function(a,b){if(!this.isInRange(a,
null))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);if(b.length!==this.columns())throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Wrong number of columns in row.");return this.__setRow(a,b)};p.prototype.__setRow=function(a,b){for(var c=this.columns(),e=1;e<=c;e++)this.___set(a,e,b[e-1]);return this};p.prototype.getColumn=function(a){if(!this.isInRange(null,a))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);return this.__getColumn(a)};p.prototype.__getColumn=function(a){for(var b=[],c=this.rows(),e=1;e<=c;e++)b.push(this.___get(e,
a));return b};p.prototype.setColumn=function(a,b){if(!this.isInRange(null,a))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);if(b.length!==this.rows())throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Wrong number of rows in column");return this.__setColumn(a,b)};p.prototype.__setColumn=function(a,b){for(var c=this.rows(),e=1;e<=c;e++)this.___set(e,a,b[e-1]);return this};p.prototype.isSameSizeAs=function(a){return this.rows()===a.rows()&&this.columns()===a.columns()};p.prototype.dim=function(a){switch(a){case 1:case "rows":return this.rows();
case 2:case "columns":return this.columns();case "max":return Math.max(this.rows(),this.columns());case "min":return Math.min(this.rows(),this.columns());default:throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Parameter must match a known value");}};p.prototype.equals=function(a){if(!this.isSameSizeAs(a))return!1;for(var b=this.___getElements(),c=a.___getElements(),e=this.___getColumnIndicator(),f=a.___getColumnIndicator(),g=0;g<b.length;g++)if(b[g]!==c[g]||e[g]!==f[g])return!1;b=this.___getRowPointer();
a=a.___getRowPointer();for(c=0;c<b.length;c++)if(b[c]!==a[c])return!1;return!0};p.prototype.stringify=function(a,b){a=s(a,q.options.stringify.rowSeparator);b=s(b,q.options.stringify.columnSeparator);for(var c=[],e,f=this.rows(),g=this.columns(),h=1;h<=f;h++){e=[];for(var m=1;m<=g;m++)e[m-1]=this.___get(h,m);c.push(e.join(b))}return c.join(a)};p.prototype.isInRange=function(a,b){return(!c(a)||1<=a&&a<=this.rows())&&(!c(b)||1<=b&&b<=this.columns())};p.zeros=function(a,b){b=c(b)?b:a;return new p(a,b)};
p.eye=function(a){var b=q.repeat(a,1),c=q.linspace(1,a),e=q.linspace(0,a);return new p(a,a,b,c,e)};p.diag=function(a,b){a=r(a);b=c(b)?b:0;for(var e=(new v).size(a.length+Math.abs(b)),f=-Math.min(b,0),g=Math.max(b,0),h=1;h<=a.length;h++)e.set(h+f,h+g,a[h-1]);return e.build()};q.options={stringify:{rowSeparator:"\r\n",columnSeparator:"\t"},isTriangular:{mode:"both"},roundTo:{digits:0},norm:{which:"max"},random:{minVal:0,maxVal:1,onlyInteger:!0}};q.linspace=function(a,b,e){e=c(e)?e:1;for(var f=[];a<=
b;a+=e)f.push(a);return f};q.repeat=function(a,b){for(var c=[],e=1;e<=a;e++)c[e-1]=b;return c};q.filters={all:function(){return!0},nonZero:function(a){return 0!==a},diag:function(a,b,c){return b===c}};q.applicators={exp:function(a){return Math.exp(a)},square:function(a){return a*a}};Array.prototype.toMatrix=function(a,b){return new h(this,a,b)};Array.prototype.toVector=function(a){a="boolean"===typeof a?a:!1;return new h(this,a?1:this.length,a?this.length:1)};String.prototype.toMatrix=function(a,
b){a=s(a,"\r\n");b=s(b,"\t");for(var c=this.split(a),e,g=0,m=new h(0),k=0;k<c.length;k++){e=c[k].split(b);0===g&&(g=e.length,m=new h(c.length,g));if(e.length!==g)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Number of columns is inconsistent");for(var p=1;p<=g;p++)m.___set(k+1,p,Number(e[p-1]))}return m};a.Matrix=h;a.SparseMatrix=p;a.Vector=function(a){[].slice.call(arguments);var b=[];this.___get=function(a,c){return b[c-1]};this.___set=function(a,c,d){b[c-1]=d;return this};this.rows=function(){return 1};
this.columns=function(){return b.length};return this};a.MatrixUtils=q;a.SparseBuilder=v})(window);
