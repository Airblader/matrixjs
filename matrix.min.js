var COMPILED=!0,goog=goog||{};goog.global=this;goog.define=function(a,d){var e=d;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(e=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,e)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var d=a;(d=d.substring(0,d.lastIndexOf(".")))&&!goog.getObjectByName(d);)goog.implicitNamespaces_[d]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.exportPath_=function(a,d,e){a=a.split(".");e=e||goog.global;!(a[0]in e)&&e.execScript&&e.execScript("var "+a[0]);for(var h;a.length&&(h=a.shift());)!a.length&&goog.isDef(d)?e[h]=d:e=e[h]?e[h]:e[h]={}};goog.getObjectByName=function(a,d){for(var e=a.split("."),h=d||goog.global,m;m=e.shift();)if(goog.isDefAndNotNull(h[m]))h=h[m];else return null;return h};
goog.globalize=function(a,d){var e=d||goog.global,h;for(h in a)e[h]=a[h]};goog.addDependency=function(a,d,e){if(!COMPILED){var h;a=a.replace(/\\/g,"/");for(var m=goog.dependencies_,t=0;h=d[t];t++)m.nameToPath[h]=a,a in m.pathToNames||(m.pathToNames[a]={}),m.pathToNames[a][h]=!0;for(h=0;d=e[h];h++)a in m.requires||(m.requires[a]={}),m.requires[a][d]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var d=goog.getPathFromDeps_(a);if(d){goog.included_[d]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,d){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];
!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),d=a.length-1;0<=d;--d){var e=a[d].src,h=e.lastIndexOf("?"),h=
-1==h?e.length:h;if("base.js"==e.substr(h-7,7)){goog.basePath=e.substr(0,h-7);break}}},goog.importScript_=function(a){var d=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&d(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var d=goog.global.document;if("complete"==d.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}d.write('<script type="text/javascript" src="'+
a+'">\x3c/script>');return!0}return!1},goog.writeScripts_=function(){function a(m){if(!(m in h.written)){if(!(m in h.visited)&&(h.visited[m]=!0,m in h.requires))for(var s in h.requires[m])if(!goog.isProvided_(s))if(s in h.nameToPath)a(h.nameToPath[s]);else throw Error("Undefined nameToPath for "+s);m in e||(e[m]=!0,d.push(m))}}var d=[],e={},h=goog.dependencies_,m;for(m in goog.included_)h.written[m]||a(m);for(m=0;m<d.length;m++)if(d[m])goog.importScript_(goog.basePath+d[m]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var d=typeof a;if("object"==d)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return d;var e=Object.prototype.toString.call(a);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==d&&"undefined"==typeof a.call)return"object";return d};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var d=goog.typeOf(a);return"array"==d||"object"==d&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var d=typeof a;return"object"==d&&null!=a||"function"==d};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(d){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var d=goog.typeOf(a);if("object"==d||"array"==d){if(a.clone)return a.clone();var d="array"==d?[]:{},e;for(e in a)d[e]=goog.cloneObject(a[e]);return d}return a};goog.bindNative_=function(a,d,e){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,d,e){if(!a)throw Error();if(2<arguments.length){var h=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,h);return a.apply(d,e)}}return function(){return a.apply(d,arguments)}};goog.bind=function(a,d,e){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,d){var e=Array.prototype.slice.call(arguments,1);return function(){var d=Array.prototype.slice.call(arguments);d.unshift.apply(d,e);return a.apply(this,d)}};goog.mixin=function(a,d){for(var e in d)a[e]=d[e]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var d=goog.global.document,e=d.createElement("script");e.type="text/javascript";e.defer=!1;e.appendChild(d.createTextNode(a));d.body.appendChild(e);
d.body.removeChild(e)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,d){var e=function(a){return goog.cssNameMapping_[a]||a},h=function(a){a=a.split("-");for(var d=[],h=0;h<a.length;h++)d.push(e(a[h]));return d.join("-")},h=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?e:h:function(a){return a};return d?a+"-"+h(d):h(a)};goog.setCssNameMapping=function(a,d){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=d};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,d){var e=d||{},h;for(h in e){var m=(""+e[h]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+h+"\\}","gi"),m)}return a};goog.getMsgWithFallback=function(a,d){return a};goog.exportSymbol=function(a,d,e){goog.exportPath_(a,d,e)};goog.exportProperty=function(a,d,e){a[d]=e};
goog.inherits=function(a,d){function e(){}e.prototype=d.prototype;a.superClass_=d.prototype;a.prototype=new e;a.prototype.constructor=a};
goog.base=function(a,d,e){var h=arguments.callee.caller;if(goog.DEBUG&&!h)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(h.superClass_)return h.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var m=Array.prototype.slice.call(arguments,2),t=!1,s=a.constructor;s;s=s.superClass_&&s.superClass_.constructor)if(s.prototype[d]===h)t=!0;else if(t)return s.prototype[d].apply(a,
m);if(a[d]===h)return a.constructor.prototype[d].apply(a,m);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};(function(a){function d(c){return"number"===typeof c}function e(c){return d(c)&&(c|0)===c}function h(c){return c instanceof Array}function m(c){for(var b=0;b<c.length;b++)if(!d(c[b]))return!1;return!0}function t(c,b){return"string"===typeof c?c:b}function s(c){if(h(c))return c;if(1!==c.dim("min"))throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Argument has to be vector");c=c.dim("max")===c.rows()?c.__getColumn(1):c.__getRow(1);for(var b=[],r=1;r<=c.length;r++)b.push(c[r-1]);return b}function u(c){return[].slice.call(c)}
function q(){throw Error("This cannot be instantiated");}function f(c,b){this.name="MatrixError";this.code=c;this.message=b;this.toString=function(){return this.name+" ["+this.code+"]: "+(this.message||"No message")}}function g(c){var b=u(arguments),r,a,l=[];this.___get=function(b,c){return l[a*(b-1)+c-1]};this.___set=function(b,c,r){l[a*(b-1)+c-1]=r;return this};this.rows=function(){return r};this.columns=function(){return a};this.___getElements=function(){return l};(function(){if(1===b.length&&
h(b[0])&&0!==b[0].length&&h(b[0][0])){r=b[0].length;a=-1;for(var c=0;c<b[0].length;c++){if(b[0][c].length!==a&&-1!==a)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Number of columns must be the same for all rows");if(!m(b[0][c]))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Elements must be numbers");a=Math.max(a,b[0][c].length);l=l.concat(b[0][c])}}else if(1<=b.length&&3>=b.length&&h(b[0])&&(0===b[0].length||d(b[0][0]))){if(!m(b[0]))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Elements must be numbers");
l=b[0];var c=b[1],k=b[2];!d(c)&&!d(k)?c=k=Math.sqrt(l.length):!d(c)&&e(k)?c=l.length/k:e(c)&&!d(k)&&(k=l.length/c);if(!e(c)||!e(k))throw new f(f.ErrorCodes.OUT_OF_BOUNDS,"Array must represent square matrix if no size is given");r=c;a=k}else if(1===b.length&&e(b[0]))r=b[0],a=b[0],l=q.repeat(r*a,0);else if(2===b.length&&e(b[0])&&e(b[1]))r=b[0],a=b[1],l=q.repeat(r*a,0);else throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Parameters must match a supported signature");})();return this}function p(c){var b=
u(arguments),a,n,l=[],d=[],k=[];this.___get=function(c,b){for(var a=k[c-1];a<k[c];a++)if(d[a]===b)return l[a];return 0};this.___set=function(c,b,a){for(var r,n=!1,f=k[c-1];f<=k[c];f++)if(r=f,d[f]===b&&f!==k[c]){n=!0;break}if(!n&&0!==a){for(;c<k.length;c++)k[c]+=1;l.splice(r,0,a);d.splice(r,0,b)}else if(n&&0!==a)l.splice(r,1,a),d.splice(r,1,b);else if(n){for(;c<k.length;c++)k[c]-=1;l.splice(r,1);d.splice(r,1)}return this};this.___getElements=function(){return l};this.___getColumnIndicator=function(){return d};
this.___getRowPointer=function(){return k};this.rows=function(){return a};this.columns=function(){return n};(function(){if(1<=b.length&&2>=b.length&&e(b[0])&&(1===b.length||e(b[1])))a=b[0],n=b[1]||a,l=[],d=[],k=q.repeat(a+1,0);else if(5===b.length&&e(b[0])&&e(b[1])&&h(b[2])&&h(b[3])&&h(b[4])){a=b[0];n=b[1];l=b[2];d=b[3];k=b[4];if(-1!==l.indexOf(0))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Values must not be 0");if(a!=k.length-1)throw new f(f.ErrorCodes.OUT_OF_BOUNDS,"Number of rows is too small");
if(l.length!==d.length)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Arrays for values and column indicators have to be the same size");if(Math.max.apply(this,d)>n)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Number of columns has to be bigger than the biggest column index");}else{if(1===b.length&&b[0]instanceof v)return b[0].build();throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Parameters must match a supported signature");}})();return this}function v(){var c,b,a=[];this.size=function(a,r){c=a;b=d(r)?
r:a;return this};this.set=function(n,l,w){if(!e(c)||!e(b))throw new f(f.ErrorCodes.SIZE_NOT_GIVEN,"Size has to be specified first");if(!d(w))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Value is not numeric");if(0!==a.filter(function(c){return c.row===n&&c.column===l}).length)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Cannot set same entry multiple times");if(n>c||l>b)throw new f(f.ErrorCodes.OUT_OF_BOUNDS);0!==w&&a.push({row:n,column:l,value:w});return this};this.build=function(){a.sort(function(c,
b){return c.row!=b.row?c.row<b.row?-1:1:c.column!=b.column?c.column<b.column?-1:1:0});for(var n=[],l=q.repeat(c+1,0),d=[],f=1,e=0;e<a.length;e++){var g=a[e];n[e]=g.value;d[e]=g.column;if(0===l[g.row])for(f+=1;f<=g.row;f++)l[f]=l[f-1];l[g.row]++;f=g.row}l[c]=d.length;return new p(c,b,n,d,l)}}f.ErrorCodes={INVALID_PARAMETERS:"Invalid parameters",OUT_OF_BOUNDS:"Out of bounds",DIMENSION_MISMATCH:"Dimension mismatch",MATRIX_IS_SINGULAR:"Matrix is singular",UNKNOWN_TYPE:"Unknown type",SIZE_NOT_GIVEN:"Size not given"};
g.prototype.get=function(c,b){if(!this.isInRange(c,b))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);return this.___get(c,b)};g.prototype.set=function(c,b,a){if(!this.isInRange(c,b))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);if(!d(a))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Value has to be a number");return this.___set(c,b,a)};g.prototype.getRow=function(c){if(!this.isInRange(c,null))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);return this.__getRow(c)};g.prototype.__getRow=function(c){for(var b=[],a=this.columns(),
n=1;n<=a;n++)b.push(this.___get(c,n));return b};g.prototype.setRow=function(c,b){b=s(b);if(!this.isInRange(c,null))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);if(b.length!==this.columns())throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Wrong number of columns in row.");return this.__setRow(c,b)};g.prototype.__setRow=function(c,b){for(var a=this.columns(),n=1;n<=a;n++)this.___set(c,n,b[n-1]);return this};g.prototype.getColumn=function(c){if(!this.isInRange(null,c))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);
return this.__getColumn(c)};g.prototype.__getColumn=function(c){for(var b=[],a=this.rows(),n=1;n<=a;n++)b.push(this.___get(n,c));return b};g.prototype.setColumn=function(c,b){b=s(b);if(!this.isInRange(null,c))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);if(b.length!==this.rows())throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Wrong number of rows in column");return this.__setColumn(c,b)};g.prototype.__setColumn=function(c,b){for(var a=this.rows(),n=1;n<=a;n++)this.___set(n,c,b[n-1]);return this};g.prototype.isSameSizeAs=
function(c){return this.rows()===c.rows()&&this.columns()===c.columns()};g.prototype.isSquare=function(){return this.rows()===this.columns()};g.prototype.isSymmetric=function(){if(!this.isSquare())throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");for(var c=this.rows(),b=2;b<=c;b++)for(var a=1;a<b;a++)if(this.___get(b,a)!==this.___get(a,b))return!1;return!0};g.prototype.isTriangular=function(c){c=t(c,q.options.isTriangular.mode);if(!this.isSquare())throw new f(f.ErrorCodes.DIMENSION_MISMATCH,
"Matrix must be square");switch(c.toLowerCase()){case "lower":return this.__isTriangular(!1);case "upper":return this.__isTriangular(!0);case "both":return this.__isTriangular(!0)||this.__isTriangular(!1);default:throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Mode not supported");}};g.prototype.__isTriangular=function(c){c=c?1:-1;for(var b,a,n=this.rows(),l=1;l<n;l++){b=this.diag(c*l);a=b.length;for(var d=0;d<a;d++)if(0!==b[d])return!1}return!0};g.prototype.copy=function(){return new g(this.toArray(),
this.rows(),this.columns())};g.prototype.size=function(){return this.rows()*this.columns()};g.prototype.dim=function(c){switch(c){case 1:case "rows":return this.rows();case 2:case "columns":return this.columns();case "max":return Math.max(this.rows(),this.columns());case "min":return Math.min(this.rows(),this.columns());default:throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Parameter must match a known value");}};g.prototype.add=function(c){var b=this.rows(),a=this.columns();if(1<arguments.length)return b=
u(arguments),this.add.apply(this.add(b.shift()),b);if(!this.isSameSizeAs(c))throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrices must be of the same size");for(var n=new g(b,a),l,d,k=1;k<=b;k++){l=this.__getRow(k);d=c.__getRow(k);for(var e=0;e<a;e++)l[e]+=d[e];n.__setRow(k,l)}return n};g.prototype.subtract=function(c){var b=this.rows(),a=this.columns();if(1<arguments.length)return b=u(arguments),this.subtract.apply(this.subtract(b.shift()),b);if(!this.isSameSizeAs(c))throw new f(f.ErrorCodes.DIMENSION_MISMATCH,
"Matrices must be of the same size");for(var n=new g(b,a),l,d,k=1;k<=b;k++){l=this.__getRow(k);d=c.__getRow(k);for(var e=0;e<a;e++)l[e]-=d[e];n.__setRow(k,l)}return n};g.prototype.scale=function(c){if(!d(c))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Parameter must be a number");var b=this.rows(),a=this.columns();return 0===c?new g(b,a):1===c?this:this.fun(function(b){return c*b})};g.prototype.multiply=function(c){var b=this.rows(),a=this.columns(),n=c.columns();if(a!==c.rows())throw new f(f.ErrorCodes.DIMENSION_MISMATCH,
"Inner dimensions must match");for(var d=new g(b,n),e=1;e<=b;e++)for(var k=1;k<=n;k++){for(var h=0,m=this.__getRow(e),p=c.__getColumn(k),q=0;q<a;q++)h+=m[q]*p[q];d.___set(e,k,h)}return d};g.prototype.transpose=function(){for(var c=this.rows(),b=new g(this.columns(),c),a=1;a<=c;a++)b.__setColumn(a,this.__getRow(a));return b};g.prototype.trace=function(){if(!this.isSquare())throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");for(var c=this.rows(),b=0,a=1;a<=c;a++)b+=this.___get(a,a);
return b};g.prototype.decomposeLU=function(){var c=0,b=this.copy(),a,n,d,e,k,g=this.rows(),h=this.columns(),m;for(d=1;d<=g;d++){n=0;k=-1;e=b.__getColumn(d);for(a=d;a<=g;a++)m=Math.abs(e[a-1]),m>=k&&(n=a,k=m);if(0===e[n-1])throw new f(f.ErrorCodes.MATRIX_IS_SINGULAR);n!==d&&(a=b.__getRow(n),b.__setRow(n,b.__getRow(d)),b.__setRow(d,a),c++);e=b.__getRow(d);for(a=d+1;a<=g;a++){k=b.__getRow(a);for(n=d;n<h;n++)k[n]-=e[n]*k[d-1]/e[d-1];k[d-1]=0;b.__setRow(a,k)}}b.swappedRows=c;return b};g.prototype.det=
function(){var c,b,a,d=this.rows();if(!this.isSquare())throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");if(this.isTriangular())b=1,a=this.diag();else{try{c=this.decomposeLU()}catch(l){if(l.code&&l.code===f.ErrorCodes.MATRIX_IS_SINGULAR)return 0;throw l;}b=Math.pow(-1,c.swappedRows);a=c.diag()}for(c=0;c<d;c++)b*=a[c];return b};g.prototype.inverse=function(){if(!this.isSquare())throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");var c=this.augment(g.eye(this.rows())),
b,a,d,l,e,k,h,m,p;try{c=c.decomposeLU();m=c.rows();p=c.columns();for(l=m;1<l;l--){a=c.__getRow(l-1);b=c.__getRow(l);h=a[l-1]/b[l-1];d=[];for(k=0;k<p;k++)d[k]=a[k]-b[k]*h;c.__setRow(l-1,d)}for(e=1;e<=m;e++){b=c.__getRow(e);d=[];for(k=0;k<p;k++)d[k]=b[k]/b[e-1];c.__setRow(e,d)}}catch(q){throw new f(f.ErrorCodes.MATRIX_IS_SINGULAR);}return c.submatrix(1,m,this.columns()+1,p)};g.prototype.submatrix=function(c,b,a,d){if(!this.isInRange(c,a)||!this.isInRange(b,d)||c>b||a>d)throw new f(f.ErrorCodes.OUT_OF_BOUNDS);
for(var l=new g(b-c+1,d-a+1),e=c;e<=b;e++)l.__setRow(e-c+1,this.__getRow(e).slice(a-1,d));return l};g.prototype.augment=function(c){var b=this.rows(),a=this.columns(),d=c.columns();if(b!==c.rows())throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Number of rows must match");for(var b=new g(b,a+d),l=1;l<=a;l++)b.__setColumn(l,this.__getColumn(l));for(l=1;l<=d;l++)b.__setColumn(l+a,c.__getColumn(l));return b};g.prototype.round=function(){return this.roundTo(0)};g.prototype.roundTo=function(c){c=d(c)?c:q.options.roundTo.digits;
var b=Math.pow(10,c);return this.fun(function(c){return Math.round(c*b)/b})};g.prototype.abs=function(){return this.fun(function(c){return Math.abs(c)})};g.prototype.addRow=function(c){c=s(c);for(var b=this.rows(),a=new g(b+1,this.columns()),d=1;d<=b;d++)a.__setRow(d,this.__getRow(d));a.__setRow(b+1,c);return a};g.prototype.addColumn=function(c){return this.copy().augment(new g(s(c),null,1))};g.prototype.contains=function(c,b){b=d(b)?b:0;var a=this.rows(),n=this.columns(),l;if(!d(c)||!d(b))throw new f(f.ErrorCodes.INVALID_PARAMETERS,
"Parameter must be a number");for(var e=1;e<=a;e++){l=this.__getRow(e);for(var k=0;k<n;k++)if(0===b){if(l[k]===c)return!0}else if(Math.abs(l[k]-c)<=b)return!0}return!1};g.prototype.stringify=function(c,b){c=t(c,q.options.stringify.rowSeparator);b=t(b,q.options.stringify.columnSeparator);for(var a=[],d,f=this.rows(),e=1;e<=f;e++)d=this.__getRow(e),a.push(d.join(b));return a.join(c)};g.prototype.equals=function(c){var b=this.rows(),a=this.columns(),d,f;if(!this.isSameSizeAs(c))return!1;for(var e=1;e<=
b;e++){d=this.__getRow(e);f=c.__getRow(e);for(var k=0;k<a;k++)if(d[k]!==f[k])return!1}return!0};g.prototype.fun=function(c,b){b=b||q.filters.all;if("function"!==typeof c)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Applicator must be a function");if("function"!==typeof b)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Filter must be a function");for(var a,d,e=this.rows(),h=this.columns(),k=new g(e,h),m=1;m<=e;m++){d=this.__getRow(m);for(var p=1;p<=h;p++)a=d[p-1],b(a,m,p)&&(d[p-1]=c(a,m,p));k.__setRow(m,
d)}return k};g.prototype.spfun=function(c){return this.fun(c,q.filters.nonZero)};g.prototype.pw_exp=function(){return this.fun(q.applicators.exp,null)};g.prototype.pw_pow=function(c){return this.fun(function(b){return Math.pow(b,c)},null)};g.prototype.norm=function(c,b){c=t(c,q.options.norm.which);b=b||{};switch(c.toLowerCase()){case "p":case "pnorm":return this.pnorm(Number(b));case "frobenius":return this.pnorm(2);case "rows":case "rowsum":return this.rownorm();case "columns":case "columnsum":return this.columnnorm();
case "max":return this.maxnorm();default:throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Norm not supported");}};g.prototype.pnorm=function(c){if(!e(c))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Parameter must be an integer");for(var b=0,a=this.rows(),d=this.columns(),l,g=1;g<=a;g++){l=this.__getRow(g);for(var k=0;k<d;k++)b+=Math.pow(Math.abs(l[k]),c)}return Math.pow(b,1/c)};g.prototype.maxnorm=function(){for(var c=0,b=this.rows(),a=this.columns(),d,f=1;f<=b;f++){d=this.__getRow(f);for(var e=0;e<a;e++)c=
Math.max(c,Math.abs(d[e]))}return c};g.prototype.rownorm=function(){for(var c=0,b=this.rows(),a=1;a<=b;a++)c=Math.max(c,this.__getRow(a).toMatrix(1).pnorm(1));return c};g.prototype.columnnorm=function(){for(var c=0,b=this.columns(),a=1;a<=b;a++)c=Math.max(c,this.__getColumn(a).toMatrix(null,1).pnorm(1));return c};g.prototype.diag=function(c){c=d(c)?c:0;var b=[],a=-Math.min(c,0);c=Math.max(c,0);var e=0===a?this.columns()-c:this.rows()-a;if(0>=e)throw new f(f.ErrorCodes.OUT_OF_BOUNDS);for(var l=1;l<=
e;l++)b.push(this.___get(l+a,l+c));return b};g.prototype.isInRange=function(c,b){return(!d(c)||1<=c&&c<=this.rows())&&(!d(b)||1<=b&&b<=this.columns())};g.prototype.toArray=function(){return u(this.___getElements())};g.zeros=function(c,b){b=d(b)?b:c;return new g(c,b)};g.ones=function(c,b){b=d(b)?b:c;for(var a=new g(c,b),e=1;e<=c;e++)for(var f=1;f<=b;f++)a.___set(e,f,1);return a};g.eye=function(c){for(var b=new g(c,c),a=1;a<=c;a++)b.___set(a,a,1);return b};g.diag=function(c,b){c=s(c);b=d(b)?b:0;for(var a=
new g(c.length+Math.abs(b)),e=-Math.min(b,0),f=Math.max(b,0),h=1;h<=c.length;h++)a.___set(h+e,h+f,c[h-1]);return a};g.random=function(c,a,e,f,l){a=d(a)?a:c;e=d(e)?e:q.options.random.minVal;f=d(f)?f:q.options.random.maxVal;l="boolean"===typeof l?l:q.options.random.onlyInteger;var h=new g(c,a);f=f-e+(l?1:0);for(var k,m=1;m<=c;m++)for(var p=1;p<=a;p++)k=e+Math.random()*f,l&&(k|=0),h.___set(m,p,k);return h};p.prototype.get=function(c,a){if(!this.isInRange(c,a))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);
return this.___get(c,a)};p.prototype.set=function(c,a,e){if(!this.isInRange(c,a))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);if(!d(e))throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Value has to be a number");return this.___set(c,a,e)};p.prototype.getRow=function(c){if(!this.isInRange(c,null))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);return this.__getRow(c)};p.prototype.__getRow=function(c){for(var a=q.repeat(this.columns(),0),d=this.___getRowPointer(),e=this.___getColumnIndicator(),f=this.___getElements(),
g=d[c-1];g<d[c];g++)a[e[g]-1]=f[g];return a};p.prototype.setRow=function(c,a){if(!this.isInRange(c,null))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);if(a.length!==this.columns())throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Wrong number of columns in row.");return this.__setRow(c,a)};p.prototype.__setRow=function(c,a){for(var d=this.columns(),e=1;e<=d;e++)this.___set(c,e,a[e-1]);return this};p.prototype.getColumn=function(c){if(!this.isInRange(null,c))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);return this.__getColumn(c)};
p.prototype.__getColumn=function(c){for(var a=[],d=this.rows(),e=1;e<=d;e++)a.push(this.___get(e,c));return a};p.prototype.setColumn=function(a,b){if(!this.isInRange(null,a))throw new f(f.ErrorCodes.OUT_OF_BOUNDS);if(b.length!==this.rows())throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Wrong number of rows in column");return this.__setColumn(a,b)};p.prototype.__setColumn=function(a,b){for(var d=this.rows(),e=1;e<=d;e++)this.___set(e,a,b[e-1]);return this};p.prototype.isSameSizeAs=function(a){return this.rows()===
a.rows()&&this.columns()===a.columns()};p.prototype.isSquare=function(){return this.rows()===this.columns()};p.prototype.isSymmetric=function(){if(!this.isSquare())throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");for(var a=this.rows(),b=2;b<=a;b++)for(var d=1;d<b;d++)if(this.___get(b,d)!==this.___get(d,b))return!1;return!0};p.prototype.dim=function(a){switch(a){case 1:case "rows":return this.rows();case 2:case "columns":return this.columns();case "max":return Math.max(this.rows(),
this.columns());case "min":return Math.min(this.rows(),this.columns());default:throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Parameter must match a known value");}};p.prototype.add=function(a){var b=this.rows(),d=this.columns();if(1<arguments.length)return b=u(arguments),this.add.apply(this.add(b.shift()),b);if(!this.isSameSizeAs(a))throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrices must be of the same size");for(var e=(new v).size(b,d),l,g,k=1;k<=b;k++){l=this.__getRow(k);g=a.__getRow(k);for(var h=
1;h<=d;h++)e.set(k,h,l[h-1]+g[h-1])}return e.build()};p.prototype.subtract=function(a){var b=this.rows(),d=this.columns();if(1<arguments.length)return b=u(arguments),this.subtract.apply(this.subtract(b.shift()),b);if(!this.isSameSizeAs(a))throw new f(f.ErrorCodes.DIMENSION_MISMATCH,"Matrices must be of the same size");for(var e=(new v).size(b,d),l,g,k=1;k<=b;k++){l=this.__getRow(k);g=a.__getRow(k);for(var h=1;h<=d;h++)e.set(k,h,l[h-1]-g[h-1])}return e.build()};p.prototype.scale=function(a){if(!d(a))throw new f(f.ErrorCodes.INVALID_PARAMETERS,
"Parameter must be a number");var b=this.rows(),e=this.columns();if(0===a)return new p(b,e);if(1===a)return this;for(var g=u(this.___getElements()),l=0;l<g.length;l++)g[l]*=a;return new p(b,e,g,u(this.___getColumnIndicator()),u(this.___getRowPointer()))};p.prototype.copy=function(){return new p(this.rows(),this.columns(),u(this.___getElements()),u(this.___getColumnIndicator()),u(this.___getRowPointer()))};p.prototype.equals=function(a){if(!this.isSameSizeAs(a))return!1;for(var b=this.___getElements(),
d=a.___getElements(),e=this.___getColumnIndicator(),f=a.___getColumnIndicator(),g=0;g<b.length;g++)if(b[g]!==d[g]||e[g]!==f[g])return!1;b=this.___getRowPointer();a=a.___getRowPointer();for(d=0;d<b.length;d++)if(b[d]!==a[d])return!1;return!0};p.prototype.stringify=function(a,b){a=t(a,q.options.stringify.rowSeparator);b=t(b,q.options.stringify.columnSeparator);for(var d=[],e,f=this.rows(),g=this.columns(),k=1;k<=f;k++){e=[];for(var h=1;h<=g;h++)e[h-1]=this.___get(k,h);d.push(e.join(b))}return d.join(a)};
p.prototype.isInRange=function(a,b){return(!d(a)||1<=a&&a<=this.rows())&&(!d(b)||1<=b&&b<=this.columns())};p.zeros=function(a,b){b=d(b)?b:a;return new p(a,b)};p.eye=function(a){var b=q.repeat(a,1),d=q.linspace(1,a),e=q.linspace(0,a);return new p(a,a,b,d,e)};p.diag=function(a,b){a=s(a);b=d(b)?b:0;for(var e=(new v).size(a.length+Math.abs(b)),f=-Math.min(b,0),g=Math.max(b,0),h=1;h<=a.length;h++)e.set(h+f,h+g,a[h-1]);return e.build()};q.options={stringify:{rowSeparator:"\r\n",columnSeparator:"\t"},isTriangular:{mode:"both"},
roundTo:{digits:0},norm:{which:"max"},random:{minVal:0,maxVal:1,onlyInteger:!0}};q.linspace=function(a,b,e){e=d(e)?e:1;for(var f=[];a<=b;a+=e)f.push(a);return f};q.repeat=function(a,b){for(var d=[],e=1;e<=a;e++)d[e-1]=b;return d};q.filters={all:function(){return!0},nonZero:function(a){return 0!==a},diag:function(a,b,d){return b===d}};q.applicators={exp:function(a){return Math.exp(a)},square:function(a){return a*a}};Array.prototype.toMatrix=function(a,b){return new g(this,a,b)};Array.prototype.toVector=
function(a){a="boolean"===typeof a?a:!1;return new g(this,a?1:this.length,a?this.length:1)};String.prototype.toMatrix=function(a,b){a=t(a,"\r\n");b=t(b,"\t");for(var d=this.split(a),e,h=0,m=new g(0),k=0;k<d.length;k++){e=d[k].split(b);0===h&&(h=e.length,m=new g(d.length,h));if(e.length!==h)throw new f(f.ErrorCodes.INVALID_PARAMETERS,"Number of columns is inconsistent");for(var p=1;p<=h;p++)m.___set(k+1,p,Number(e[p-1]))}return m};a.Matrix=g;a.SparseMatrix=p;a.Vector=function(a){u(arguments);var b=
[];this.___get=function(a,c){return b[c-1]};this.___set=function(a,c,d){b[c-1]=d;return this};this.rows=function(){return 1};this.columns=function(){return b.length};return this};a.MatrixUtils=q;a.SparseBuilder=v})(window);
