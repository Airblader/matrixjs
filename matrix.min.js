var COMPILED=!0,goog=goog||{};goog.global=this;goog.define=function(a,b){var e=b;COMPILED||goog.global.CLOSURE_DEFINES&&Object.prototype.hasOwnProperty.call(goog.global.CLOSURE_DEFINES,a)&&(e=goog.global.CLOSURE_DEFINES[a]);goog.exportPath_(a,e)};goog.DEBUG=!0;goog.LOCALE="en";goog.TRUSTED_SITE=!0;
goog.provide=function(a){if(!COMPILED){if(goog.isProvided_(a))throw Error('Namespace "'+a+'" already declared.');delete goog.implicitNamespaces_[a];for(var b=a;(b=b.substring(0,b.lastIndexOf(".")))&&!goog.getObjectByName(b);)goog.implicitNamespaces_[b]=!0}goog.exportPath_(a)};goog.setTestOnly=function(a){if(COMPILED&&!goog.DEBUG)throw a=a||"",Error("Importing test-only code into non-debug environment"+a?": "+a:".");};
COMPILED||(goog.isProvided_=function(a){return!goog.implicitNamespaces_[a]&&!!goog.getObjectByName(a)},goog.implicitNamespaces_={});goog.exportPath_=function(a,b,e){a=a.split(".");e=e||goog.global;!(a[0]in e)&&e.execScript&&e.execScript("var "+a[0]);for(var c;a.length&&(c=a.shift());)!a.length&&goog.isDef(b)?e[c]=b:e=e[c]?e[c]:e[c]={}};goog.getObjectByName=function(a,b){for(var e=a.split("."),c=b||goog.global,m;m=e.shift();)if(goog.isDefAndNotNull(c[m]))c=c[m];else return null;return c};
goog.globalize=function(a,b){var e=b||goog.global,c;for(c in a)e[c]=a[c]};goog.addDependency=function(a,b,e){if(!COMPILED){var c;a=a.replace(/\\/g,"/");for(var m=goog.dependencies_,f=0;c=b[f];f++)m.nameToPath[c]=a,a in m.pathToNames||(m.pathToNames[a]={}),m.pathToNames[a][c]=!0;for(c=0;b=e[c];c++)a in m.requires||(m.requires[a]={}),m.requires[a][b]=!0}};goog.ENABLE_DEBUG_LOADER=!0;
goog.require=function(a){if(!COMPILED&&!goog.isProvided_(a)){if(goog.ENABLE_DEBUG_LOADER){var b=goog.getPathFromDeps_(a);if(b){goog.included_[b]=!0;goog.writeScripts_();return}}a="goog.require could not find: "+a;goog.global.console&&goog.global.console.error(a);throw Error(a);}};goog.basePath="";goog.nullFunction=function(){};goog.identityFunction=function(a,b){return a};goog.abstractMethod=function(){throw Error("unimplemented abstract method");};
goog.addSingletonGetter=function(a){a.getInstance=function(){if(a.instance_)return a.instance_;goog.DEBUG&&(goog.instantiatedSingletons_[goog.instantiatedSingletons_.length]=a);return a.instance_=new a}};goog.instantiatedSingletons_=[];
!COMPILED&&goog.ENABLE_DEBUG_LOADER&&(goog.included_={},goog.dependencies_={pathToNames:{},nameToPath:{},requires:{},visited:{},written:{}},goog.inHtmlDocument_=function(){var a=goog.global.document;return"undefined"!=typeof a&&"write"in a},goog.findBasePath_=function(){if(goog.global.CLOSURE_BASE_PATH)goog.basePath=goog.global.CLOSURE_BASE_PATH;else if(goog.inHtmlDocument_())for(var a=goog.global.document.getElementsByTagName("script"),b=a.length-1;0<=b;--b){var e=a[b].src,c=e.lastIndexOf("?"),c=
-1==c?e.length:c;if("base.js"==e.substr(c-7,7)){goog.basePath=e.substr(0,c-7);break}}},goog.importScript_=function(a){var b=goog.global.CLOSURE_IMPORT_SCRIPT||goog.writeScriptTag_;!goog.dependencies_.written[a]&&b(a)&&(goog.dependencies_.written[a]=!0)},goog.writeScriptTag_=function(a){if(goog.inHtmlDocument_()){var b=goog.global.document;if("complete"==b.readyState){if(/\bdeps.js$/.test(a))return!1;throw Error('Cannot write "'+a+'" after document load');}b.write('<script type="text/javascript" src="'+
a+'">\x3c/script>');return!0}return!1},goog.writeScripts_=function(){function a(f){if(!(f in c.written)){if(!(f in c.visited)&&(c.visited[f]=!0,f in c.requires))for(var d in c.requires[f])if(!goog.isProvided_(d))if(d in c.nameToPath)a(c.nameToPath[d]);else throw Error("Undefined nameToPath for "+d);f in e||(e[f]=!0,b.push(f))}}var b=[],e={},c=goog.dependencies_,m;for(m in goog.included_)c.written[m]||a(m);for(m=0;m<b.length;m++)if(b[m])goog.importScript_(goog.basePath+b[m]);else throw Error("Undefined script input");
},goog.getPathFromDeps_=function(a){return a in goog.dependencies_.nameToPath?goog.dependencies_.nameToPath[a]:null},goog.findBasePath_(),goog.global.CLOSURE_NO_DEPS||goog.importScript_(goog.basePath+"deps.js"));
goog.typeOf=function(a){var b=typeof a;if("object"==b)if(a){if(a instanceof Array)return"array";if(a instanceof Object)return b;var e=Object.prototype.toString.call(a);if("[object Window]"==e)return"object";if("[object Array]"==e||"number"==typeof a.length&&"undefined"!=typeof a.splice&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("splice"))return"array";if("[object Function]"==e||"undefined"!=typeof a.call&&"undefined"!=typeof a.propertyIsEnumerable&&!a.propertyIsEnumerable("call"))return"function"}else return"null";
else if("function"==b&&"undefined"==typeof a.call)return"object";return b};goog.isDef=function(a){return void 0!==a};goog.isNull=function(a){return null===a};goog.isDefAndNotNull=function(a){return null!=a};goog.isArray=function(a){return"array"==goog.typeOf(a)};goog.isArrayLike=function(a){var b=goog.typeOf(a);return"array"==b||"object"==b&&"number"==typeof a.length};goog.isDateLike=function(a){return goog.isObject(a)&&"function"==typeof a.getFullYear};goog.isString=function(a){return"string"==typeof a};
goog.isBoolean=function(a){return"boolean"==typeof a};goog.isNumber=function(a){return"number"==typeof a};goog.isFunction=function(a){return"function"==goog.typeOf(a)};goog.isObject=function(a){var b=typeof a;return"object"==b&&null!=a||"function"==b};goog.getUid=function(a){return a[goog.UID_PROPERTY_]||(a[goog.UID_PROPERTY_]=++goog.uidCounter_)};goog.removeUid=function(a){"removeAttribute"in a&&a.removeAttribute(goog.UID_PROPERTY_);try{delete a[goog.UID_PROPERTY_]}catch(b){}};
goog.UID_PROPERTY_="closure_uid_"+(1E9*Math.random()>>>0);goog.uidCounter_=0;goog.getHashCode=goog.getUid;goog.removeHashCode=goog.removeUid;goog.cloneObject=function(a){var b=goog.typeOf(a);if("object"==b||"array"==b){if(a.clone)return a.clone();var b="array"==b?[]:{},e;for(e in a)b[e]=goog.cloneObject(a[e]);return b}return a};goog.bindNative_=function(a,b,e){return a.call.apply(a.bind,arguments)};
goog.bindJs_=function(a,b,e){if(!a)throw Error();if(2<arguments.length){var c=Array.prototype.slice.call(arguments,2);return function(){var e=Array.prototype.slice.call(arguments);Array.prototype.unshift.apply(e,c);return a.apply(b,e)}}return function(){return a.apply(b,arguments)}};goog.bind=function(a,b,e){Function.prototype.bind&&-1!=Function.prototype.bind.toString().indexOf("native code")?goog.bind=goog.bindNative_:goog.bind=goog.bindJs_;return goog.bind.apply(null,arguments)};
goog.partial=function(a,b){var e=Array.prototype.slice.call(arguments,1);return function(){var b=Array.prototype.slice.call(arguments);b.unshift.apply(b,e);return a.apply(this,b)}};goog.mixin=function(a,b){for(var e in b)a[e]=b[e]};goog.now=goog.TRUSTED_SITE&&Date.now||function(){return+new Date};
goog.globalEval=function(a){if(goog.global.execScript)goog.global.execScript(a,"JavaScript");else if(goog.global.eval)if(null==goog.evalWorksForGlobals_&&(goog.global.eval("var _et_ = 1;"),"undefined"!=typeof goog.global._et_?(delete goog.global._et_,goog.evalWorksForGlobals_=!0):goog.evalWorksForGlobals_=!1),goog.evalWorksForGlobals_)goog.global.eval(a);else{var b=goog.global.document,e=b.createElement("script");e.type="text/javascript";e.defer=!1;e.appendChild(b.createTextNode(a));b.body.appendChild(e);
b.body.removeChild(e)}else throw Error("goog.globalEval not available");};goog.evalWorksForGlobals_=null;goog.getCssName=function(a,b){var e=function(a){return goog.cssNameMapping_[a]||a},c=function(a){a=a.split("-");for(var f=[],d=0;d<a.length;d++)f.push(e(a[d]));return f.join("-")},c=goog.cssNameMapping_?"BY_WHOLE"==goog.cssNameMappingStyle_?e:c:function(a){return a};return b?a+"-"+c(b):c(a)};goog.setCssNameMapping=function(a,b){goog.cssNameMapping_=a;goog.cssNameMappingStyle_=b};
!COMPILED&&goog.global.CLOSURE_CSS_NAME_MAPPING&&(goog.cssNameMapping_=goog.global.CLOSURE_CSS_NAME_MAPPING);goog.getMsg=function(a,b){var e=b||{},c;for(c in e){var m=(""+e[c]).replace(/\$/g,"$$$$");a=a.replace(RegExp("\\{\\$"+c+"\\}","gi"),m)}return a};goog.getMsgWithFallback=function(a,b){return a};goog.exportSymbol=function(a,b,e){goog.exportPath_(a,b,e)};goog.exportProperty=function(a,b,e){a[b]=e};
goog.inherits=function(a,b){function e(){}e.prototype=b.prototype;a.superClass_=b.prototype;a.prototype=new e;a.prototype.constructor=a};
goog.base=function(a,b,e){var c=arguments.callee.caller;if(goog.DEBUG&&!c)throw Error("arguments.caller not defined.  goog.base() expects not to be running in strict mode. See http://www.ecma-international.org/ecma-262/5.1/#sec-C");if(c.superClass_)return c.superClass_.constructor.apply(a,Array.prototype.slice.call(arguments,1));for(var m=Array.prototype.slice.call(arguments,2),f=!1,d=a.constructor;d;d=d.superClass_&&d.superClass_.constructor)if(d.prototype[b]===c)f=!0;else if(f)return d.prototype[b].apply(a,
m);if(a[b]===c)return a.constructor.prototype[b].apply(a,m);throw Error("goog.base called from a method of one name to a method of a different name");};goog.scope=function(a){a.call(goog.global)};(function(a){function b(){throw Error("This cannot be instantiated");}function e(f,d){this.name="MatrixError";this.code=f;this.message=d;this.toString=function(){return this.name+" ["+this.code+"]: "+(this.message||"No message")}}function c(f){var d=[].slice.call(arguments),a,c,g=[];this.___get=function(f,d){return g[c*(f-1)+d-1]};this.___set=function(f,d,a){g[c*(f-1)+d-1]=a;return this};this.rows=function(){return a};this.columns=function(){return c};this.___getElements=function(){return g};(function(){if(1===
d.length&&d[0]instanceof Array&&0!==d[0].length&&d[0][0]instanceof Array){a=d[0].length;c=-1;for(var f=0;f<d[0].length;f++){if(d[0][f].length!==c&&-1!==c)throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Number of columns must be the same for all rows");if(!b.isNumberArray(d[0][f]))throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Elements must be numbers");c=Math.max(c,d[0][f].length);g=g.concat(d[0][f])}}else if(1<=d.length&&3>=d.length&&d[0]instanceof Array&&(0===d[0].length||b.isNumber(d[0][0]))){if(!b.isNumberArray(d[0]))throw new e(e.ErrorCodes.INVALID_PARAMETERS,
"Elements must be numbers");g=d[0];var f=d[1],h=d[2];!b.isNumber(f)&&!b.isNumber(h)?f=h=Math.sqrt(g.length):!b.isNumber(f)&&b.isInteger(h)?f=g.length/h:b.isInteger(f)&&!b.isNumber(h)&&(h=g.length/f);if(!b.isInteger(f)||!b.isInteger(h))throw new e(e.ErrorCodes.OUT_OF_BOUNDS,"Array must represent square matrix if no size is given");a=f;c=h}else if(1===d.length&&b.isInteger(d[0]))a=d[0],c=d[0],g=b.repeat(a*c,0);else if(2===d.length&&b.isInteger(d[0])&&b.isInteger(d[1]))a=d[0],c=d[1],g=b.repeat(a*c,0);
else throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Parameters must match a supported signature");})();return this}function m(f){[].slice.call(arguments);var d,a=[],b=[],c=[];this.___get=function(f,d){for(var e=c[f-1];e<c[f];e++)if(b[e]===d)return a[e];return 0};this.___set=function(f,d,e){var m=c[f];a.splice(m,0,e);for(b.splice(m,0,d);f<c.length;f++)c[f]+=1;return this};this.rows=function(){return c.length-1};this.columns=function(){return d};a=[1,2,3];b=[1,2,3];c=[0,1,2,3];d=3;return this}e.ErrorCodes=
{INVALID_PARAMETERS:"Invalid parameters",OUT_OF_BOUNDS:"Out of bounds",DIMENSION_MISMATCH:"Dimension mismatch",MATRIX_IS_SINGULAR:"Matrix is singular",UNKNOWN_TYPE:"Unknown type"};c.options={stringify:{rowSeparator:"\r\n",columnSeparator:"\t"},isTriangular:{mode:"both"},roundTo:{digits:0},norm:{which:"max"},random:{minVal:0,maxVal:1,onlyInteger:!0}};c.prototype.get=function(f,d){if(!this.isInRange(f,d))throw new e(e.ErrorCodes.OUT_OF_BOUNDS);return this.___get(f,d)};c.prototype.set=function(f,d,a){if(!this.isInRange(f,
d))throw new e(e.ErrorCodes.OUT_OF_BOUNDS);if(!b.isNumber(a))throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Value has to be a number");return this.___set(f,d,a)};c.prototype.getRow=function(f,d){d=b.getBooleanWithDefault(d,!1);if(!this.isInRange(f,null))throw new e(e.ErrorCodes.OUT_OF_BOUNDS);return this.__getRow(f,d)};c.prototype.__getRow=function(f,d){for(var a=[],b=this.columns(),e=1;e<=b;e++)a.push(this.___get(f,e));return d?new c(a,1):a};c.prototype.setRow=function(f,d){d=b.toArray(d);if(!this.isInRange(f,
null))throw new e(e.ErrorCodes.OUT_OF_BOUNDS);if(d.length!==this.columns())throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Wrong number of columns in row.");return this.__setRow(f,d)};c.prototype.__setRow=function(f,d){for(var a=this.columns(),c=1;c<=a;c++)this.___set(f,c,d[c-1]);return this};c.prototype.getColumn=function(f,d){d=b.getBooleanWithDefault(d,!1);if(!this.isInRange(null,f))throw new e(e.ErrorCodes.OUT_OF_BOUNDS);return this.__getColumn(f,d)};c.prototype.__getColumn=function(f,d){for(var a=
[],b=this.rows(),e=1;e<=b;e++)a.push(this.___get(e,f));return d?new c(a,null,1):a};c.prototype.setColumn=function(f,d){d=b.toArray(d);if(!this.isInRange(null,f))throw new e(e.ErrorCodes.OUT_OF_BOUNDS);if(d.length!==this.rows())throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Wrong number of rows in column");return this.__setColumn(f,d)};c.prototype.__setColumn=function(f,d){for(var a=this.rows(),c=1;c<=a;c++)this.___set(c,f,d[c-1]);return this};c.prototype.isSameSizeAs=function(f){return this.rows()===
f.rows()&&this.columns()===f.columns()};c.prototype.isSparse=function(){return this instanceof m};c.prototype.isVector=function(){return 1===this.dim("min")};c.prototype.isSquare=function(){return this.rows()===this.columns()};c.prototype.isSymmetric=function(){if(!this.isSquare())throw new e(e.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");for(var f=this.rows(),d=2;d<=f;d++)for(var a=1;a<d;a++)if(this.___get(d,a)!==this.___get(a,d))return!1;return!0};c.prototype.isTriangular=function(f){f=
b.getStringWithDefault(f,c.options.isTriangular.mode);if(!this.isSquare())throw new e(e.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");switch(f.toLowerCase()){case "lower":return this.__isTriangular(!1);case "upper":return this.__isTriangular(!0);case "both":return this.__isTriangular(!0)||this.__isTriangular(!1);default:throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Mode not supported");}};c.prototype.__isTriangular=function(f){f=f?1:-1;for(var d,a,c=this.rows(),b=1;b<c;b++){d=this.diag(f*
b);a=d.length;for(var e=0;e<a;e++)if(0!==d[e])return!1}return!0};c.prototype.copy=function(){return new c(this.toArray(),this.rows(),this.columns())};c.prototype.size=function(){return this.rows()*this.columns()};c.prototype.dim=function(f){switch(f){case 1:case "rows":return this.rows();case 2:case "columns":return this.columns();case "max":return Math.max(this.rows(),this.columns());case "min":return Math.min(this.rows(),this.columns());default:throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Parameter must match a known value");
}};c.prototype.add=function(f){var d=this.rows(),a=this.columns();if(1<arguments.length)return d=[].slice.call(arguments),this.add.apply(this.add(d.shift()),d);if(!this.isSameSizeAs(f))throw new e(e.ErrorCodes.DIMENSION_MISMATCH,"Matrices must be of the same size");for(var b=new c(d,a),g,k,h=1;h<=d;h++){g=this.__getRow(h,!1);k=f.__getRow(h,!1);for(var n=0;n<a;n++)g[n]+=k[n];b.__setRow(h,g)}return b};c.prototype.subtract=function(f){var d=this.rows(),a=this.columns();if(1<arguments.length)return d=
[].slice.call(arguments),this.subtract.apply(this.subtract(d.shift()),d);if(!this.isSameSizeAs(f))throw new e(e.ErrorCodes.DIMENSION_MISMATCH,"Matrices must be of the same size");for(var b=new c(d,a),g,k,h=1;h<=d;h++){g=this.__getRow(h,!1);k=f.__getRow(h,!1);for(var n=0;n<a;n++)g[n]-=k[n];b.__setRow(h,g)}return b};c.prototype.scale=function(f){if(!b.isNumber(f))throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Parameter must be a number");for(var d=this.rows(),a=this.columns(),l=new c(d,a),g,k=1;k<=d;k++){g=
this.__getRow(k,!1);for(var h=0;h<a;h++)g[h]*=f;l.__setRow(k,g)}return l};c.prototype.multiply=function(f){var d=this.rows(),a=this.columns(),b=f.columns();if(a!==f.rows())throw new e(e.ErrorCodes.DIMENSION_MISMATCH,"Inner dimensions must match");for(var g=new c(d,b),k=1;k<=d;k++)for(var h=1;h<=b;h++){for(var n=0,m=this.__getRow(k,!1),q=f.__getColumn(h,!1),r=0;r<a;r++)n+=m[r]*q[r];g.___set(k,h,n)}return g};c.prototype.transpose=function(){for(var f=this.rows(),d=new c(this.columns(),f),a=1;a<=f;a++)d.__setColumn(a,
this.__getRow(a,!1));return d};c.prototype.trace=function(){if(!this.isSquare())throw new e(e.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");for(var f=this.rows(),d=0,a=1;a<=f;a++)d+=this.___get(a,a);return d};c.prototype.decomposeLU=function(){var f=0,d=this.copy(),a,b,c,k,h,n=this.rows(),m=this.columns(),q;for(c=1;c<=n;c++){b=0;h=-1;k=d.__getColumn(c,!1);for(a=c;a<=n;a++)q=Math.abs(k[a-1]),q>=h&&(b=a,h=q);if(0===k[b-1])throw new e(e.ErrorCodes.MATRIX_IS_SINGULAR);b!==c&&(a=d.__getRow(b,
!1),d.__setRow(b,d.__getRow(c,!1)),d.__setRow(c,a),f++);k=d.__getRow(c,!1);for(a=c+1;a<=n;a++){h=d.__getRow(a,!1);for(b=c;b<m;b++)h[b]-=k[b]*h[c-1]/k[c-1];h[c-1]=0;d.__setRow(a,h)}}d.swappedRows=f;return d};c.prototype.det=function(){var f,d,a,c=this.rows();if(!this.isSquare())throw new e(e.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");if(this.isTriangular())d=1,a=this.diag();else{try{f=this.decomposeLU()}catch(b){if(b.code&&b.code===e.ErrorCodes.MATRIX_IS_SINGULAR)return 0;throw b;}d=Math.pow(-1,
f.swappedRows);a=f.diag()}for(f=0;f<c;f++)d*=a[f];return d};c.prototype.inverse=function(){if(!this.isSquare())throw new e(e.ErrorCodes.DIMENSION_MISMATCH,"Matrix must be square");var f=this.augment(c.eye(this.rows())),a,b,l,g,k,h,n,m,q;try{f=f.decomposeLU();m=f.rows();q=f.columns();for(g=m;1<g;g--){b=f.__getRow(g-1,!1);a=f.__getRow(g,!1);n=b[g-1]/a[g-1];l=[];for(h=0;h<q;h++)l[h]=b[h]-a[h]*n;f.__setRow(g-1,l)}for(k=1;k<=m;k++){a=f.__getRow(k,!1);l=[];for(h=0;h<q;h++)l[h]=a[h]/a[k-1];f.__setRow(k,
l)}}catch(r){throw new e(e.ErrorCodes.MATRIX_IS_SINGULAR);}return f.submatrix(1,m,this.columns()+1,q)};c.prototype.submatrix=function(f,a,b,l){if(!this.isInRange(f,b)||!this.isInRange(a,l)||f>a||b>l)throw new e(e.ErrorCodes.OUT_OF_BOUNDS);for(var g=new c(a-f+1,l-b+1),k=f;k<=a;k++)g.__setRow(k-f+1,this.__getRow(k,!1).slice(b-1,l));return g};c.prototype.augment=function(f){var a=this.rows(),b=this.columns(),l=f.columns();if(a!==f.rows())throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Number of rows must match");
for(var a=new c(a,b+l),g=1;g<=b;g++)a.__setColumn(g,this.__getColumn(g,!1));for(g=1;g<=l;g++)a.__setColumn(g+b,f.__getColumn(g,!1));return a};c.prototype.dot=function(f){var a=this.rows();if(!this.isVector()||!f.isVector()||1!==this.columns()||1!==f.columns())throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Parameter must be a column vector");if(a!==f.rows())throw new e(e.ErrorCodes.DIMENSION_MISMATCH);for(var b=0,c=1;c<=a;c++)b+=this.___get(c,1)*f.___get(c,1);return b};c.prototype.round=function(){return this.roundTo(0)};
c.prototype.roundTo=function(f){f=b.getNumberWithDefault(f,c.options.roundTo.digits);var a=Math.pow(10,f);return this.fun(function(f){return Math.round(f*a)/a})};c.prototype.abs=function(){return this.fun(function(f){return Math.abs(f)})};c.prototype.cross=function(f){if(!this.isVector()||!f.isVector()||3!==this.rows()||3!==f.rows())throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Parameters must be three-dimensional column vectors");return new c([[this.___get(2,1)*f.___get(3,1)-this.___get(3,1)*f.___get(2,
1)],[this.___get(3,1)*f.___get(1,1)-this.___get(1,1)*f.___get(3,1)],[this.___get(1,1)*f.___get(2,1)-this.___get(2,1)*f.___get(1,1)]])};c.prototype.addRow=function(f){f=b.toArray(f);for(var a=this.rows(),e=new c(a+1,this.columns()),l=1;l<=a;l++)e.__setRow(l,this.__getRow(l,!1));e.__setRow(a+1,f);return e};c.prototype.addColumn=function(f){return this.copy().augment(new c(b.toArray(f),null,1))};c.prototype.contains=function(f,a){a=b.getNumberWithDefault(a,0);var c=this.rows(),l=this.columns(),g;if(!b.isNumber(f)||
!b.isNumber(a))throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Parameter must be a number");for(var k=1;k<=c;k++){g=this.__getRow(k,!1);for(var h=0;h<l;h++)if(0===a){if(g[h]===f)return!0}else if(Math.abs(g[h]-f)<=a)return!0}return!1};c.prototype.stringify=function(a,d){a=b.getStringWithDefault(a,c.options.stringify.rowSeparator);d=b.getStringWithDefault(d,c.options.stringify.columnSeparator);for(var e=[],l,g=this.rows(),k=1;k<=g;k++)l=this.__getRow(k,!1),e.push(l.join(d));return e.join(a)};c.prototype.equals=
function(a){var d=this.rows(),b=this.columns(),c,e;if(!this.isSameSizeAs(a))return!1;for(var k=1;k<=d;k++){c=this.__getRow(k,!1);e=a.__getRow(k,!1);for(var h=0;h<b;h++)if(c[h]!==e[h])return!1}return!0};c.prototype.fun=function(a,d){d=d||b.filters.all;if("function"!==typeof a)throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Applicator must be a function");if("function"!==typeof d)throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Filter must be a function");for(var s,l,g=this.rows(),k=this.columns(),h=new c(g,
k),m=1;m<=g;m++){l=this.__getRow(m,!1);for(var p=1;p<=k;p++)s=l[p-1],d(s,m,p)&&(l[p-1]=a(s,m,p));h.__setRow(m,l)}return h};c.prototype.spfun=function(a){return this.fun(a,b.filters.nonZero)};c.prototype.pw_exp=function(){return this.fun(b.applicators.exp,null)};c.prototype.pw_pow=function(a){return this.fun(function(d){return Math.pow(d,a)},null)};c.prototype.norm=function(a,d){a=b.getStringWithDefault(a,c.options.norm.which);d=d||{};switch(a.toLowerCase()){case "p":case "pnorm":return this.pnorm(Number(d));
case "frobenius":return this.pnorm(2);case "rows":case "rowsum":return this.rownorm();case "columns":case "columnsum":return this.columnnorm();case "max":return this.maxnorm();default:throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Norm not supported");}};c.prototype.pnorm=function(a){if(!b.isInteger(a))throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Parameter must be an integer");for(var d=0,c=this.rows(),l=this.columns(),g,k=1;k<=c;k++){g=this.__getRow(k,!1);for(var h=0;h<l;h++)d+=Math.pow(Math.abs(g[h]),
a)}return Math.pow(d,1/a)};c.prototype.maxnorm=function(){for(var a=0,d=this.rows(),b=this.columns(),c,e=1;e<=d;e++){c=this.__getRow(e,!1);for(var k=0;k<b;k++)a=Math.max(a,Math.abs(c[k]))}return a};c.prototype.rownorm=function(){for(var a=0,d=this.rows(),b=1;b<=d;b++)a=Math.max(a,this.__getRow(b,!0).pnorm(1));return a};c.prototype.columnnorm=function(){for(var a=0,d=this.columns(),b=1;b<=d;b++)a=Math.max(a,this.__getColumn(b,!0).pnorm(1));return a};c.prototype.diag=function(a){a=b.getNumberWithDefault(a,
0);var d=[],c=-Math.min(a,0);a=Math.max(a,0);var l=0===c?this.columns()-a:this.rows()-c;if(0>=l)throw new e(e.ErrorCodes.OUT_OF_BOUNDS);for(var g=1;g<=l;g++)d.push(this.___get(g+c,g+a));return d};c.prototype.isInRange=function(a,d){return(!b.isNumber(a)||1<=a&&a<=this.rows())&&(!b.isNumber(d)||1<=d&&d<=this.columns())};c.prototype.toArray=function(){return[].slice.call(this.___getElements())};c.zeros=function(a,d){d=b.getNumberWithDefault(d,a);return new c(a,d)};c.ones=function(a,d){d=b.getNumberWithDefault(d,
a);for(var e=new c(a,d),l=1;l<=a;l++)for(var g=1;g<=d;g++)e.___set(l,g,1);return e};c.eye=function(a){for(var d=new c(a,a),b=1;b<=a;b++)d.___set(b,b,1);return d};c.diag=function(a,d){a=b.toArray(a);d=b.getNumberWithDefault(d,0);for(var e=new c(a.length+Math.abs(d)),l=-Math.min(d,0),g=Math.max(d,0),k=e.rows()-Math.abs(d),h=1;h<=k;h++)e.___set(h+l,h+g,a[h-1]);return e};c.random=function(a,d,e,l,g){d=b.getNumberWithDefault(d,a);e=b.getNumberWithDefault(e,c.options.random.minVal);l=b.getNumberWithDefault(l,
c.options.random.maxVal);g=b.getBooleanWithDefault(g,c.options.random.onlyInteger);var k=new c(a,d);l=l-e+(g?1:0);for(var h,m=1;m<=a;m++)for(var p=1;p<=d;p++)h=e+Math.random()*l,g&&(h|=0),k.___set(m,p,h);return k};b.isNumber=function(a){return"number"===typeof a};b.isInteger=function(a){return b.isNumber(a)&&(a|0)===a};b.isMatrix=function(a){return a instanceof c};b.isNumberArray=function(a){for(var d=0;d<a.length;d++)if(!b.isNumber(a[d]))return!1;return!0};b.linspace=function(a,d,c){c=b.getNumberWithDefault(c,
1);for(var e=[];a<=d;a+=c)e.push(a);return e};b.repeat=function(a,b){for(var c=[],e=1;e<=a;e++)c[e-1]=b;return c};b.toArray=function(a){if(!b.isMatrix(a))return a;if(!a.isVector())throw new e(e.ErrorCodes.DIMENSION_MISMATCH,"Argument has to be vector");var d=a.copy();a.dim("max")!==a.rows()&&(d=d.transpose());a=[];for(var c=d.rows(),l=1;l<=c;l++)a.push(d.___get(l,1));return a};b.getNumberWithDefault=function(a,d){return b.isNumber(a)?a:d};b.getStringWithDefault=function(a,b){return"string"===typeof a?
a:b};b.getBooleanWithDefault=function(a,b){return"boolean"===typeof a?a:b};b.filters={all:function(){return!0},nonZero:function(a){return 0!==a},diag:function(a,b,c){return b===c}};b.applicators={exp:function(a){return Math.exp(a)},square:function(a){return a*a}};Array.prototype.toMatrix=function(a,b){return new c(this,a,b)};Array.prototype.toVector=function(a){a=b.getBooleanWithDefault(a,!1);return new c(this,a?1:this.length,a?this.length:1)};String.prototype.toMatrix=function(a,d){a=b.getStringWithDefault(a,
"\r\n");d=b.getStringWithDefault(d,"\t");for(var m=this.split(a),l,g=0,k=new c(0),h=0;h<m.length;h++){l=m[h].split(d);0===g&&(g=l.length,k=new c(m.length,g));if(l.length!==g)throw new e(e.ErrorCodes.INVALID_PARAMETERS,"Number of columns is inconsistent");for(var n=1;n<=g;n++)k.___set(h+1,n,Number(l[n-1]))}return k};a.Matrix=c;a.SparseMatrix=m;a.Vector=function(a){[].slice.call(arguments);var b=[];this.___get=function(a,c){return b[c-1]};this.___set=function(a,c,e){b[c-1]=e;return this};this.rows=
function(){return 1};this.columns=function(){return b.length};return this};a.MatrixUtils=b})(window);
